{"version":3,"sources":["config.js","module-setting.js","module-user.js","app.js","controllers.js","controller-buku.js","controller-favorit.js","controller-feedback.js","controller-koleksi.js","controller-login.js","controller-pemberitahuan.js","controller-pengaturan.js","controller-pesan-single.js","controller-pesan.js","controller-pinjaman.js","controller-profil.js"],"names":["lg","console","log","bind","lgi","lge","lgw","app_version","app_version_text","apiUrl","String","prototype","toTitleCase","this","replace","txt","charAt","toUpperCase","substr","toLowerCase","settingModule","angular","module","factory","$root","$q","set","key","data","window","localStorage","JSON","stringify","get","str","parse","e","resolveOnlineImage","url","resolveLocalFileSystemURL","defer","filename","split","lastValue","when","cordova","file","applicationStorageDirectory","entry","localUrl","toURL","resolve","FileTransfer","ft","download","error","promise","run","setting","userModule","$httpProvider","defaults","headers","post","$http","Upload","changeKey","newKey","common","token","createGetRequest","uri","saveCall","indexOf","Date","getTime","toString","success","status","reject","message","err","createPostRequest","params","serialize","f","isLogin","localProfile","obj","prefix","p","hasOwnProperty","k","v","push","encodeURIComponent","join","profile","val","getKey","setKey","cek","isLoginLocal","login","email","password","ini","credential","detail","register","registerData","changeAvatar","upload","method","sendFieldsAs","fields","progress","evt","progressPercentage","parseInt","loaded","total","notify","config","cekLocal","member_image","then","$broadcast","logout","saveBio","bio","getBooks","getBook","biblio_id","getBookRate","setBookRate","rate","getBookComments","setBookComments","text","setBookFav","unsetBookFav","getBookLoans","getMessageList","getMessageTexts","member_id","postMessage","getTopics","getNotif","postNotifRead","ids","notif_id","getVersion","user","$rootScope","$ionicPlatform","$location","ready","path","mainApp","$ionicConfig","$ionicHistory","$ionicPopup","res","alert","title","template","open","gplay","version_text","plugins","Keyboard","hideKeyboardAccessoryBar","disableScroll","StatusBar","styleDefault","screen","lockOrientation","$stateProvider","$urlRouterProvider","$ionicConfigProvider","tabs","style","position","navBar","alignTitle","positionPrimaryButtons","state","abstract","templateUrl","controller","views","historyRoot","content","otherwise","controll","$scope","$state","$ionicSideMenuDelegate","$ionicPopover","info","$on","ts","fs","isBackButtonShow","backView","changeState","to","isOpenLeft","toggleLeft","go","getColor","id","colors","length","getBookThumbnail","getMemberAvatar","fromTemplateUrl","scope","popover","popTopRight","showRightMenu","$event","show","remove","doViewRefresh","hide","doViewHelp","$ionicLoading","onGetBook","book","is_fav","isFavorit","toggleFav","own_rate","rating","comments","input","comment","setRating","n","doSendComment","unshift","offset","limit","param","favorit","books","search","openBook","clearHistory","doRefresh","reset","results","concat","doLoadMore","canLoadMore","doSearch","doReset","sectionTitle","topics","topic_name","doOpenTopic","topicId","topic","getBG","username","doLogin","openRegister","member_name","member_phone","openLogin","doRegister","mailtest","test","password2","reads","i","notifs","is_read","doOpen","notif","from_id","doLogout","$stateParams","$ionicScrollDelegate","sdel","$getByHandle","messages","scrollBottom","sendMessage","newMessage","popup","cssClass","buttons","type","onTap","preventDefault","close","openChat","edit","member_address","isEditPhone","editPhone","isEditAddress","editAddress","isEditName","editName","doChangeAvatar","document","getElementById","click","changeImage","files","$$phase","$apply"],"mappings":"AAAA,GAAAA,IAAAC,QAAAC,IAAAC,KAAAF,SACAG,IAAAH,QAAAC,IAAAC,KAAAF,SACAI,IAAAJ,QAAAC,IAAAC,KAAAF,SACAK,IAAAL,QAAAC,IAAAC,KAAAF,SAEAM,YAAA,EACAC,iBAAA,QAGAC,OAAA,8BAKAC,QAAAC,UAAAC,YAAA,WACA,MAAAC,MAAAC,QAAA,SAAA,SAAAC,GAAA,MAAAA,GAAAC,OAAA,GAAAC,cAAAF,EAAAG,OAAA,GAAAC,gBCfA,IAAAC,eAAAC,QAAAC,OAAA,mBAEAF,eAAAG,QAAA,WAAA,aAAA,KAAA,SAAAC,EAAAC,GAEA,OACAC,IAAA,SAAAC,EAAAC,GACA,MAAAC,QAAAC,cAGA,gBAAAF,KACAA,EAAAG,KAAAC,UAAAJ,IAMAC,OAAAC,aAAAH,GAAAC,GACA,IAVA,GAYAK,IAAA,SAAAN,GACA,GAAAE,OAAAC,aAAA,CACA,GAAAI,GAAAL,OAAAC,aAAAH,EAEA,IAAAO,EAEA,IACA,GAAAN,GAAAG,KAAAI,MAAAD,EAEA,OAAAN,GACA,MAAAQ,GACA,GAAA,aAAAF,EACA,MAEA,OAAA,SAAAA,GACA,EAEAA,EAIA,GAAA,aAAAA,EACA,MAEA,OAAA,SAAAA,GACA,EAGAA,EAEA,OAAA,GAGAG,mBAAA,SAAAC,GAGA,GAAAT,OAAAU,0BAAA,CACA,GAAAC,GAAAf,EAAAe,QAEAC,EAAAH,EAAAI,MAAA,KAAAC,SAEA,KAAAF,EACA,MAAAhB,GAAAmB,KAAAN,EAEA,KACAT,OAAAU,0BAAAM,QAAAC,KAAAC,4BAAAN,EAAA,SAAAO,GAEA/C,QAAAC,IAAA,qBAAA2C,QAAAC,KAAAC,4BAAAN,EAEA,IAAAQ,GAAAD,EAAAE,OACAV,GAAAW,QAAAF,IAEA,WAGA,GAAAG,aAAA,CACA,GAAAC,GAAA,GAAAD,aACAC,GAAAC,SACAhB,EAAAO,QAAAC,KAAAC,4BAAAN,EACA,SAAAO,GACA/C,QAAAC,IAAA,uBAAA2C,QAAAC,KAAAC,4BAAAN,EAEA,IAAAQ,GAAAD,EAAAE,OACAV,GAAAW,QAAAF,IAGA,SAAAM,GACAtD,QAAAC,IAAA,4BAEAsC,EAAAW,QAAAb,KAEA,UAMArC,SAAAC,IAAA,8BACAsC,EAAAW,QAAAb,KAIA,MAAAF,GACA,MAAAX,GAAAmB,KAAAN,GAGA,MAAAE,GAAAgB,QAIA,MADAvD,SAAAC,IAAA,2CACAuB,EAAAmB,KAAAN,QAOAlB,cAAAqC,KAAA,aAAA,UAAA,SAAAjC,EAAAkC,GAEAlC,EAAAkC,QAAAA,ICtHA,IAAAC,YAAAtC,QAAAC,OAAA,iBAAA,gBAAA,SAAAsC,GACAA,EAAAC,SAAAC,QAAAC,KAAA,gBAAA,sCAGAJ,YAAApC,QAAA,QAAA,QAAA,KAAA,aAAA,SAAA,UAAA,SAAAyC,EAAAvC,EAAAD,EAAAyC,EAAAP,GAWA,QAAAQ,GAAAC,GACAxC,EAAAwC,EACAH,EAAAH,SAAAC,QAAAM,OAAAC,MAAA1C,EACAE,OAAAC,aAAA,eAAAH,EACA1B,QAAAC,IAAA,aAAAyB,GAcA,QAAA2C,GAAAC,EAAAC,GACA,GAAAhC,GAAAf,EAAAe,OAGA+B,IADAA,EAAAE,QAAA,MAAA,EACA,cAAA,GAAAC,OAAAC,UAAAC,WAEA,cAAA,GAAAF,OAAAC,UAAAC,UAGAZ,GAAA/B,IAAAxB,OAAA8D,GACAM,QAAA,SAAAjD,GACAA,EAAAkD,OACAtC,EAAAW,QAAAvB,EAAAA,MAEAY,EAAAuC,OAAAnD,EAAAoD,WALAhB,SAQA,SAAAiB,GACAzC,EAAAuC,OAAAE,IAGA,OAAAzC,GAAAgB,QAEA,QAAA0B,GAAAX,EAAAY,GACA,GAAA3C,GAAAf,EAAAe,OAGA+B,IADAA,EAAAE,QAAA,MAAA,EACA,cAAA,GAAAC,OAAAC,UAAAC,WAEA,cAAA,GAAAF,OAAAC,UAAAC,UAGAZ,GAAAD,KAAAtD,OAAA8D,EAAAa,UAAAD,IACAN,QAAA,SAAAjD,GACAA,EAAAkD,OACAtC,EAAAW,QAAAvB,EAAAA,MAEAY,EAAAuC,OAAAnD,EAAAoD,WALAhB,SAQA,SAAAiB,GACAzC,EAAAuC,OAAAE,IAGA,OAAAzC,GAAAgB,QAvEA3B,OAAAwD,EAAArB,CAEA,IAAArC,GAAAE,OAAAC,aAAA,gBAAA,GACAwD,GAAA,EAEAC,EAAA7B,EAAAzB,IAAA,cA6FA,OA3FA+B,GAAAH,SAAAC,QAAAM,OAAAC,MAAA1C,EAQAyD,UAAA,SAAAI,EAAAC,GACA,GAAAvD,KACA,KAAA,GAAAwD,KAAAF,GACA,GAAAA,EAAAG,eAAAD,GAAA,CACA,GAAAE,GAAAH,EAAAA,EAAA,IAAAC,EAAA,IAAAA,EAAAG,EAAAL,EAAAE,EACAxD,GAAA4D,KAAA,gBAAAD,GACAT,UAAAS,EAAAD,GACAG,mBAAAH,GAAA,IAAAG,mBAAAF,IAGA,MAAA3D,GAAA8D,KAAA,OA0EAC,GAAAA,WACA,MAAAV,IAEAU,GAAAA,SAAAC,GACAX,EAAAW,GAEAC,OAAA,WACA,MAAAxE,IAEAyE,OAAA,SAAAzE,GACAuC,EAAAvC,GAEAA,IACA2D,GAAA,GACAzE,KAAAwF,OAEAf,QAAA,WAEA,MADAlF,KAAA,UAAAkF,GACAA,GAEAgB,aAAA,WACA,MAAA,KAAA3E,GAEA4E,MAAA,SAAAC,EAAAC,GACA,GAAAjE,GAAAf,EAAAe,QACAkE,EAAA7F,KAEA8F,GAAAH,MAAAA,EAAAC,SAAAA,EA0BA,OAxBAzC,GAAAD,KAAAtD,OAAA,aAAA2E,UAAAuB,IACA9B,QAAA,SAAAjD,GACAA,EAAAkD,OACAlD,EAAAA,MAAAA,EAAAA,KAAAyC,OACAH,EAAAtC,EAAAA,KAAAyC,OAEAiB,GAAA,EACAoB,EAAAL,MACA7D,EAAAW,SAAA,IAEAX,EAAAuC,OAAA,gCAGAnD,EAAAoD,SAAA,gBAAApD,GAAAgF,OACApE,EAAAuC,OAAAnD,EAAAgF,QAEApE,EAAAuC,OAAA,+BAhBAf,SAoBA,SAAAiB,GACAzC,EAAAuC,OAAAE,KAGAzC,EAAAgB,SAEAqD,SAAA,SAAAC,GACA,GAAAtE,GAAAf,EAAAe,QACAkE,EAAA7F,IA0BA,OAxBAmD,GAAAD,KAAAtD,OAAA,gBAAA2E,UAAA0B,IACAjC,QAAA,SAAAjD,GACAA,EAAAkD,OACAlD,EAAAA,MAAAA,EAAAA,KAAAyC,OACAH,EAAAtC,EAAAA,KAAAyC,OAEAiB,GAAA,EACAoB,EAAAL,MACA7D,EAAAW,SAAA,IAEAX,EAAAuC,OAAA,gCAGAnD,EAAAoD,SAAA,gBAAApD,GAAAoD,QACAxC,EAAAuC,OAAAnD,EAAAoD,SAEAxC,EAAAuC,OAAA,+BAhBAf,SAoBA,SAAAiB,GACAzC,EAAAuC,OAAAE,KAGAzC,EAAAgB,SAEAuD,aAAA,SAAAjE,GACA,GAAAN,GAAAf,EAAAe,OAuBA,OArBAyB,GAAA+C,QACA1E,IAAA7B,OAAA,cACAwG,OAAA,OACAnE,KAAAA,EACAoE,aAAA,OACAC,YAEAC,SAAA,SAAAC,GACA,GAAAC,GAAAC,SAAA,IAAAF,EAAAG,OAAAH,EAAAI,MACAjF,GAAAkF,OAAAJ,KACAzC,QAAA,SAAAjD,EAAAkD,EAAAhB,EAAA6D,GACA1H,QAAAC,IAAA0B,GACAA,EAAAkD,OACAtC,EAAAW,QAAAvB,EAAAA,MAEAY,EAAAuC,QAAA,KACAxB,MAAA,SAAA3B,EAAAkD,EAAAhB,EAAA6D,GACA1H,QAAAC,IAAA0B,GACAY,EAAAuC,QAAA,KAGAvC,EAAAgB,SAEAoE,SAAA,WAGA,MAFAxH,KAAA,YAAAuB,GAEA,KAAAA,EACAF,EAAAmB,MAAAkC,QAAA,IAEArD,EAAAmB,MAAAkC,QAAA,KAIAuB,IAAA,WACA,GAAA7D,GAAAf,EAAAe,QACAkE,EAAA7F,IAEA,OAAA,KAAAc,EACAF,EAAAmB,MAAAkC,QAAA,KAGAd,EAAA/B,IAAAxB,OAAA,QACAoE,QAAA,SAAAjD,EAAAkD,GACA1E,IAAA,YAAAwB,EAAAkD,OAAAlD,EAAAA,MACAA,EAAAkD,QACAQ,GAAA,EAGAoB,EAAAT,QAAArE,EAAAA,KACA8E,EAAAT,QAAA4B,aAGAnE,EAAArB,mBAAAqE,EAAAT,QAAA4B,cAAAC,KAAA,SAAAxF,GACAoE,EAAAT,QAAA4B,aAAAvF,IAHAoE,EAAAT,QAAA4B,aAAA,6BAMAnE,EAAAhC,IAAA,UAAAgF,EAAAT,SAEAzD,EAAAW,QAAAvB,EAAAA,MAEAJ,EAAAuG,WAAA,SAAArB,EAAAT,UAEArE,EAAA+D,eAAA,WACAzB,EAAA,IACA1B,EAAAW,QAAAvB,IACAA,EAAA+D,eAAA,WACAnD,EAAAuC,OAAAnD,EAAAoD,SAEAxC,EAAAuC,OAAAhD,KAAAC,UAAAJ,MA3BAoC,SA8BA,SAAAiB,GACAzC,EAAAuC,OAAAhD,KAAAC,UAAAiD,MAGAzC,EAAAgB,UAEAU,UAAAA,EACA8D,OAAA,WACA,GAAAxF,GAAAf,EAAAe,OACAwB,GAAA/B,IAAAxB,OAAA,UACAoE,QAAA,SAAAjD,GACA0D,GAAA,EACApB,EAAA,IACA1B,EAAAW,SAAA,KAJAa,SAMA,SAAAiB,GACAK,GAAA,EACApB,EAAA,IACA1B,EAAAW,SAAA,IAGA,OAAAX,GAAAgB,SAEAyE,QAAA,SAAAC,GACA,MAAAhD,GAAA,OAAAgD,IAGAC,SAAA,SAAAhD,GACA,GAAAjD,GAAA,EAIA,OAHAiD,KACAjD,EAAA,IAAAkD,UAAAD,IAEAb,EAAA,QAAApC,IAEAkG,QAAA,SAAAC,GACA,MAAA/D,GAAA,QAAA+D,IAEAC,YAAA,SAAAD,GACA,MAAA/D,GAAA,QAAA+D,EAAA,UAEAE,YAAA,SAAAF,EAAAG,GACA,MAAAtD,GAAA,QAAAmD,EAAA,SAAAG,KAAAA,KAEAC,gBAAA,SAAAJ,GACA,MAAA/D,GAAA,QAAA+D,EAAA,cAEAK,gBAAA,SAAAL,EAAAM,GACA,MAAAzD,GAAA,QAAAmD,EAAA,YAAAM,KAAAA,KAEAC,WAAA,SAAAP,GACA,MAAAnD,GAAA,QAAAmD,EAAA,aAEAQ,aAAA,SAAAR,GACA,MAAAnD,GAAA,QAAAmD,EAAA,eAGAS,aAAA,WACA,MAAAxE,GAAA,eAGAyE,eAAA,WACA,MAAAzE,GAAA,aAEA0E,gBAAA,SAAAC,GACA,MAAA3E,GAAA,WAAA2E,IAEAC,YAAA,SAAAD,EAAAN,GACA,MAAAzD,GAAA,WACA+D,UAAAA,EACAN,KAAAA,KAIAQ,UAAA,WACA,MAAA7E,GAAA,iBAGA8E,SAAA,WACA,MAAA9E,GAAA,UAEA+E,cAAA,SAAAC,GACA,MAAApE,GAAA,cACAqE,SAAAD,KAIAE,WAAA,SAAA3D,GACA,MAAAvB,GAAA,iBAAAuB,QAMAlC,WAAAF,KAAA,OAAA,aAAA,QAAA,iBAAA,YAAA,SAAAgG,EAAAC,EAAA1F,EAAA2F,EAAAC,GACAD,EAAAE,MAAA,WACA5J,QAAAC,IAAA,eACAwJ,EAAAD,KAAAA,EACAA,EAAApD,MAAAyB,KAAA,aAEA,WACA8B,EAAAE,KAAA,gBC5WA,IAAAC,SAAA1I,QAAAC,OAAA,WAAA,QAAA,cAAA,aAAA,gBAAA,gBAEAyI,SAAAtG,KAAA,eAAA,iBAAA,gBAAA,aAAA,OAAA,cAAA,SAAAuG,EAAAL,EAAAM,EAAAP,EAAAD,EAAAS,GAEAT,EAAAD,WAAAjJ,aAAAuH,KAAA,SAAAqC,GACAD,EAAAE,OACAC,MAAAF,EAAAE,MACAC,SAAAH,EAAAxB,OACAb,KAAA,WACAjG,OAAA0I,KAAAJ,EAAAK,MAAA,eAIAd,EAAAe,aAAAjK,iBAEAmJ,EAAAE,MAAA,WAEAhI,OAAAgB,SAAAhB,OAAAgB,QAAA6H,QAAAC,WACA9H,QAAA6H,QAAAC,SAAAC,0BAAA,GACA/H,QAAA6H,QAAAC,SAAAE,eAAA,IAGAhJ,OAAAiJ,WACAA,UAAAC,iBAIAC,OAAAC,iBACAD,OAAAC,gBAAA,eAOAlB,QAAApC,QAAA,iBAAA,qBAAA,uBAAA,SAAAuD,EAAAC,EAAAC,GAEAA,EAAAC,KAAAC,MAAA,YAAAC,SAAA,UACAH,EAAAI,OAAAC,WAAA,UAAAC,uBAAA,QAEAR,EAEAS,MAAA,OACArJ,IAAA,OACAsJ,YAAA,EACAC,YAAA,uBACAC,WAAA,oBAGAH,MAAA,eACArJ,IAAA,WACAyJ,OACAC,aAAA,EACAC,SACAJ,YAAA,yBACAC,WAAA,wBAKAH,MAAA,cACArJ,IAAA,UACAyJ,OACAE,SACAJ,YAAA,wBACAC,WAAA,uBAKAH,MAAA,YACArJ,IAAA,YACAyJ,OACAE,SACAJ,YAAA,sBACAC,WAAA,qBAKAH,MAAA,mBACArJ,IAAA,mBACAyJ,OACAE,SACAJ,YAAA,6BACAC,WAAA,2BAKAH,MAAA,aACArJ,IAAA,SACAyJ,OACAE,SACAJ,YAAA,uBACAC,WAAA,sBAKAH,MAAA,oBACArJ,IAAA,2BACAyJ,OACAE,SACAJ,YAAA,8BACAC,WAAA,4BAKAH,MAAA,qBACArJ,IAAA,iBACAyJ,OACAE,SACAJ,YAAA,+BACAC,WAAA,8BAKAH,MAAA,gBACArJ,IAAA,YACAyJ,OACAE,SACAJ,YAAA,0BACAC,WAAA,yBAKAH,MAAA,eACArJ,IAAA,WACAyJ,OACAE,SACAJ,YAAA,yBACAC,WAAA,wBAKAH,MAAA,qBACArJ,IAAA,iBACAyJ,OACAE,SACAJ,YAAA,+BACAC,WAAA,6BAKAH,MAAA,kBACArJ,IAAA,cACAyJ,OACAE,SACAJ,YAAA,4BACAC,WAAA,2BAKAH,MAAA,SACArJ,IAAA,SACAuJ,YAAA,uBACAC,WAAA,oBAEAH,MAAA,YACArJ,IAAA,YACAuJ,YAAA,gCACAC,WAAA,uBAIAX,EAAAe,UAAA,kBC5KA,IAAAC,UAAA9K,QAAAC,OAAA,iBAEA6K,UAAA1I,KAAA,iBAAA,gBAAA,aAAA,OAAA,YAAA,SAAAkG,EAAAM,EAAAP,EAAAD,EAAAG,GACAH,EAAAnD,gBACAsD,EAAAE,KAAA,aAQAqC,SAAAL,WAAA,mBAAA,SAAA,SAAA,gBAAA,YAAA,yBAAA,OAAA,gBACA,SAAAM,EAAAC,EAAApC,EAAAL,EAAA0C,EAAA7C,EAAA8C,GACAtM,QAAAuM,KAAA,mBAEAJ,EAAAK,IAAA,mBAAA,SAAArK,EAAAsK,MAGAN,EAAAK,IAAA,mBAAA,SAAArK,EAAAuK,MAIAP,EAAAQ,iBAAA,WACA,MAAA,QAAA3C,EAAA4C,YAEAT,EAAAU,YAAA,SAAAC,GACAT,EAAAU,cACAV,EAAAW,aAEAZ,EAAAa,GAAAH,IAEAX,EAAAe,SAAA,SAAAC,GACAA,EAAAA,GAAA,CACA,IAAAC,IAAA,UAAA,UAAA,UAAA,UAAA,UAAA,UAAA,UAAA,UAAA,UAAA,UAAA,UAAA,UAAA,UAKA,OAJAD,IAAAC,EAAAC,SACAF,GAAAC,EAAAC,QAGAD,EAAAD,IAEAhB,EAAAmB,iBAAA,SAAAjL,GACA,MAAAA,GACAA,EAEA,IAIA8J,EAAAoB,gBAAA,SAAAlL,GACA,MAAAA,GACAA,EAEA,8BAQAiK,EAAAkB,gBAAA,iBACAC,MAAAtB,IACAtE,KAAA,SAAA6F,GACAvB,EAAAwB,YAAAD,IAEAvB,EAAAyB,cAAA,SAAAC,GACA1B,EAAAwB,YAAAG,KAAAD,IAGA1B,EAAAK,IAAA,WAAA,WACAL,EAAAwB,YAAAI,WAGA5B,EAAA6B,cAAA,WACA7B,EAAAwB,YAAAM,OAEA9B,EAAArE,WAAA,YAGAqE,EAAA+B,WAAA,WACA/B,EAAAwB,YAAAM,WCjFA/B,SAAAL,WAAA,kBAAA,SAAA,SAAA,gBAAA,OAAA,gBAAA,SAAAM,EAAAC,EAAApC,EAAAR,EAAA2E,GA0BA,QAAAC,GAAAlE,GACAiC,EAAAkC,KAAAnE,EAEAA,EAAAoE,SACAnC,EAAAoC,WAAA,GA7BAvO,QAAAuM,KAAA,mBAEAJ,EAAAgB,GAAAf,EAAAlH,OAAAiI,GACAhB,EAAAkC,MAAA,EACAlC,EAAAoC,WAAA,EAEAJ,EAAAL,MAAAzD,SAAA,wBACAb,EAAArB,QAAAgE,EAAAgB,IAAAtF,KAAA,SAAAqC,GACAkE,EAAAlE,GACAiE,EAAAF,QACA,SAAAjJ,GACAmJ,EAAAF,OACAjO,QAAAC,IAAA+E,KAGAmH,EAAAqC,UAAA,WACArC,EAAAoC,WAIApC,EAAAoC,WAAA,EACA/E,EAAAZ,aAAAuD,EAAAgB,MAJAhB,EAAAoC,WAAA,EACA/E,EAAAb,WAAAwD,EAAAgB,SAgBAjB,SAAAL,WAAA,wBAAA,SAAA,SAAA,gBAAA,OAAA,gBAAA,cACA,SAAAM,EAAAC,EAAApC,EAAAR,EAAA2E,EAAAlE,GAgDA,QAAAmE,GAAAlE,GACAiC,EAAAkC,KAAAnE,EACAA,EAAAuE,SACAtC,EAAAuC,OAAAxE,EAAAuE,SAEAtC,EAAAuC,OAAA,EAGAlF,EAAAhB,gBAAA2D,EAAAgB,IAAAtF,KAAA,SAAAqC,GACAiC,EAAAwC,SAAAzE,IAxDAlK,QAAAuM,KAAA,mBAEAJ,EAAAgB,GAAAf,EAAAlH,OAAAiI,GACAhB,EAAAkC,MAAA,EACAlC,EAAAuC,OAAA,EACAvC,EAAAwC,YACAxC,EAAAyC,OACAC,QAAA,IAGAV,EAAAL,MAAAzD,SAAA,wBACAb,EAAArB,QAAAgE,EAAAgB,IAAAtF,KAAA,SAAAqC,GACAkE,EAAAlE,GACAiE,EAAAF,QACA,SAAAjJ,GACAmJ,EAAAF,OACAjO,QAAAC,IAAA+E,KAGAmH,EAAA2C,UAAA,SAAAC,GACA5C,EAAAuC,OAAAK,EACAvF,EAAAlB,YAAA6D,EAAAgB,GAAA4B,GAAAlH,KAAA,SAAAqC,GACAlK,QAAAC,IAAA,uBAIAkM,EAAA6C,cAAA,WACA7C,EAAAyC,MAAAC,SACA5E,EAAAE,OACAC,MAAA,qBACAC,SAAA,gCAIAb,EAAAf,gBAAA0D,EAAAgB,GAAAhB,EAAAyC,MAAAC,SAAAhH,KAAA,SAAAqC,GACAiC,EAAAwC,SAAAM,QAAA/E,GACAiC,EAAAyC,MAAAC,QAAA,IACA,SAAA7J,GACA,gBAAA,IACAiF,EAAAE,OACAC,MAAA,0BACAC,SAAArF,UC9EAkH,SAAAL,WAAA,qBAAA,SAAA,SAAA,gBAAA,gBAAA,OAAA,SAAAM,EAAAC,EAAApC,EAAAmE,EAAA3E,GACAxJ,QAAAuM,KAAA,oBAEA,IAAA2C,GAAA,EACAC,EAAA,GACAC,GACAF,OAAAA,EACAC,MAAAA,EACAE,QAAA,EAGAlD,GAAAmD,SACAnD,EAAA3E,MAAA,EACA2E,EAAAoD,QACA7G,KAAA,IAGAyD,EAAAqD,SAAA,SAAAT,GACA3C,EAAAa,GAAA,YAAAE,GAAA4B,KAGA/E,EAAAyF,eAEAtD,EAAAuD,UAAA,SAAAC,GACAxB,EAAAL,MAAAzD,SAAA,mBACAb,EAAAtB,SAAAkH,GAAAvH,KAAA,SAAAqC,GACAyF,EACAxD,EAAAmD,MAAApF,EAAA0F,QAEAzD,EAAAmD,MAAAnD,EAAAmD,MAAAO,OAAA3F,EAAA0F,SAEAzD,EAAA3E,MAAA0C,EAAAhF,OAAAsC,MACA2G,EAAAF,QACA,WACAE,EAAAF,UAGA9B,EAAAuD,YAEAvD,EAAA2D,WAAA,WACAZ,GAAAC,EACAC,EAAAD,MAAAA,EACAC,EAAAF,OAAAA,EACA/C,EAAAuD,aAGAvD,EAAA4D,YAAA,WAEA,MAAAb,GAAAC,EAAAhD,EAAA3E,OAGA2E,EAAA6D,SAAA,WAEAd,EAAA,EACAC,EAAA,GACAC,GACAF,OAAAA,EACAC,MAAAA,EACA/E,MAAA+B,EAAAoD,OAAA7G,MAEAyD,EAAAuD,WAAA,IAGAvD,EAAA8D,QAAA,WACAf,EAAA,EACAC,EAAA,GACAC,GACAF,OAAAA,EACAC,MAAAA,EACAE,QAAA,GAEAlD,EAAAuD,WAAA,IAGAvD,EAAAK,IAAA,mBAAA,WACAL,EAAA8D,YAGA9D,EAAAK,IAAA,UAAA,WACAL,EAAA8D,eC/EA/D,SAAAL,WAAA,0BAAA,SAAA,SAAA,gBAAA,OAAA,SAAAM,EAAAC,EAAApC,EAAAR,GACAxJ,QAAAuM,KAAA,0BAEAvC,EAAAyF,kBCHAvD,SAAAL,WAAA,qBAAA,SAAA,SAAA,gBAAA,gBAAA,OAAA,SAAAM,EAAAC,EAAApC,EAAAmE,EAAA3E,GACAxJ,QAAAuM,KAAA,qBAEA,IAAA2C,GAAA,EACAC,EAAA,GACAC,GACAF,OAAAA,EACAC,MAAAA,EAGAhD,GAAA+D,aAAA,GACA/D,EAAAmD,SACAnD,EAAA3E,MAAA,EACA2E,EAAAoD,QACA7G,KAAA,IAEAyD,EAAAgE,UACA3G,EAAAN,YAAArB,KAAA,SAAAqC,GACAiC,EAAAgE,OAAAjG,IAGAiC,EAAAqD,SAAA,SAAAT,GACA3C,EAAAa,GAAA,YAAAE,GAAA4B,KAGA/E,EAAAyF,eAEAtD,EAAAuD,UAAA,SAAAC,GACAxB,EAAAL,MAAAzD,SAAA,mBACAb,EAAAtB,SAAAkH,GAAAvH,KAAA,SAAAqC,GACAyF,EACAxD,EAAAmD,MAAApF,EAAA0F,QAEAzD,EAAAmD,MAAAnD,EAAAmD,MAAAO,OAAA3F,EAAA0F,SAEAzD,EAAA3E,MAAA0C,EAAAhF,OAAAsC,MAEA0C,EAAAhF,QAAAgF,EAAAhF,OAAAkL,WACAjE,EAAA+D,aAAA,cAAAhG,EAAAhF,OAAAkL,WAAAzP,cACAuJ,EAAAhF,QAAAgF,EAAAhF,OAAAkF,MACA+B,EAAA+D,aAAA,eAAAhG,EAAAhF,OAAAkF,MAAAzJ,cAEAwL,EAAA+D,cAAA,EAGA/B,EAAAF,QACA,WACAE,EAAAF,UAGA9B,EAAAuD,YAEAvD,EAAA2D,WAAA,WACAZ,GAAAC,EACAC,EAAAD,MAAAA,EACAC,EAAAF,OAAAA,EACA/C,EAAAuD,aAGAvD,EAAA4D,YAAA,WAEA,MAAAb,GAAAC,EAAAhD,EAAA3E,OAGA2E,EAAA6D,SAAA,WAEAd,EAAA,EACAC,EAAA,GACAC,GACAF,OAAAA,EACAC,MAAAA,EACA/E,MAAA+B,EAAAoD,OAAA7G,MAEAyD,EAAAuD,WAAA,IAGAvD,EAAAkE,YAAA,SAAAC,GACApB,EAAA,EACAC,EAAA,GACAC,GACAF,OAAAA,EACAC,MAAAA,EACAoB,MAAAD,GAEAnE,EAAAuD,WAAA,IAGAvD,EAAA8D,QAAA,WACAf,EAAA,EACAC,EAAA,GACAC,GACAF,OAAAA,EACAC,MAAAA,GAEAhD,EAAAuD,WAAA,IAGAvD,EAAAK,IAAA,UAAA,WACAL,EAAA8D,YAIA9D,EAAAqE,MAAA,SAAArD,GACA,GAAAC,IAAA,UAAA,UAAA,UAAA,UAAA,UAAA,UACA,OAAAA,GAAAD,EAAAC,EAAAC,YCxGAnB,SAAAL,WAAA,mBAAA,SAAA,YAAA,gBAAA,OAAA,cAAA,gBAAA,SAAAM,EAAAxC,EAAAK,EAAAR,EAAAS,EAAAkE,GACAnO,QAAAuM,KAAA,mBAEAvC,EAAAyF,eACAtD,EAAAxK,MACA8O,SAAA,GACAjK,SAAA,IAGA2F,EAAAuE,QAAA,WACA1Q,QAAAC,IAAA,QAAAkM,EAAAxK,KAAA8O,UACA,KAAAtE,EAAAxK,KAAA8O,SACAxG,EAAAE,OACAE,SAAA,uCACAD,MAAA,uBAEA,KAAA+B,EAAAxK,KAAA6E,SACAyD,EAAAE,OACAE,SAAA,+BACAD,MAAA,wBAGA+D,EAAAL,MAAAzD,SAAA,oBACAb,EAAAlD,MAAA6F,EAAAxK,KAAA8O,SAAAtE,EAAAxK,KAAA6E,UAAAqB,KAAA,SAAAqC,GACAP,EAAAE,KAAA,gBACAsE,EAAAF,QACA,SAAAjJ,GACAmJ,EAAAF,OACAhE,EAAAE,OACAE,SAAArF,EACAoF,MAAA,cAMA+B,EAAAwE,aAAA,WACAhH,EAAAE,KAAA,gBAMAqC,SAAAL,WAAA,sBAAA,SAAA,YAAA,gBAAA,OAAA,cAAA,gBAAA,SAAAM,EAAAxC,EAAAK,EAAAR,EAAAS,EAAAkE,GACAnO,QAAAC,IAAA,sBAEAkM,EAAAxK,MACAqH,UAAA,GACA4H,YAAA,GACArK,MAAA,GACAsK,aAAA,GACArK,SAAA,IAGA2F,EAAA2E,UAAA,WACAnH,EAAAE,KAAA,UAGAsC,EAAA4E,WAAA,WACA,GAAAC,GAAA,0JAEA7E,EAAAxK,KAAAqH,WAAAmD,EAAAxK,KAAAqH,UAAAqE,OAAA,EACApD,EAAAE,OACAE,SAAA,oDACAD,MAAA,wBAEA+B,EAAAxK,KAAAiP,aAAAzE,EAAAxK,KAAAiP,YAAAvD,OAAA,EACApD,EAAAE,OACAE,SAAA,uDACAD,MAAA,uBAEA+B,EAAAxK,KAAA4E,MAKAyK,EAAAC,KAAA9E,EAAAxK,KAAA4E,QAKA4F,EAAAxK,KAAAkP,cAAA1E,EAAAxK,KAAAkP,aAAAxD,OAAA,EACApD,EAAAE,OACAE,SAAA,+BACAD,MAAA,wBAEA+B,EAAAxK,KAAA6E,UAAA2F,EAAAxK,KAAA6E,SAAA6G,OAAA,GAAAlB,EAAAxK,KAAA6E,UAAA2F,EAAAxK,KAAAuP,UACAjH,EAAAE,OACAE,SAAA,4FACAD,MAAA,wBAGA+D,EAAAL,MAAAzD,SAAA,yBACAb,EAAA5C,SAAAuF,EAAAxK,MAAAkG,KAAA,WACA8B,EAAAE,KAAA,gBACAsE,EAAAF,QACA,SAAAjJ,GACAmJ,EAAAF,OACAE,EAAAF,OACAhE,EAAAE,OACAE,SAAArF,EACAoF,MAAA,aAxBAH,EAAAE,OACAE,SAAA,4BACAD,MAAA,uBAPAH,EAAAE,OACAE,SAAA,4BACAD,MAAA,2BC1EA8B,SAAAL,WAAA,2BAAA,SAAA,SAAA,gBAAA,OAAA,gBAAA,SAAAM,EAAAC,EAAApC,EAAAR,EAAA2E,GA2BA,QAAAgD,KAEA,IAAA,GADA9H,MACA+H,EAAA,EAAAA,EAAAjF,EAAAkF,OAAA1P,KAAA0L,OAAA+D,IACA,MAAAjF,EAAAkF,OAAA1P,KAAAyP,GAAAE,SACAjI,EAAAxD,KAAAsG,EAAAkF,OAAA1P,KAAAyP,GAAAjE,GAGA9D,GAAAgE,QACA7D,EAAAJ,cAAAC,GAAAxB,KAAA,SAAAqC,GACAlK,QAAAC,IAAA,aAAAiK,IACA,cApCAlK,QAAAuM,KAAA,2BAEAvC,EAAAyF,eAEAtD,EAAAkF,UAEAlF,EAAAuD,UAAA,WACAvB,EAAAL,MAAAzD,SAAA,8BACAb,EAAAL,WAAAtB,KAAA,SAAAqC,GACAiC,EAAAkF,OAAAnH,EAEAiH,IAEAhD,EAAAF,QACA,WACAE,EAAAF,UAIA9B,EAAAK,IAAA,UAAA,WACAL,EAAAuD,cAGAvD,EAAAuD,YAmBAvD,EAAAoF,OAAA,SAAAC,GACA,IAAAA,EAAA9I,KAAAlE,QAAA,mBACA4H,EAAAa,GAAA,oBAAAjE,UAAAwI,EAAAC,cC7CAvF,SAAAL,WAAA,wBAAA,SAAA,SAAA,YAAA,gBAAA,OAAA,SAAAM,EAAAC,EAAAzC,EAAAK,EAAAR,GACAxJ,QAAAuM,KAAA,wBAEAvC,EAAAyF,eAGAtD,EAAAuF,SAAA,WACA/H,EAAAE,KAAA,cCPAqC,SAAAL,WAAA,yBAAA,SAAA,SAAA,OAAA,gBAAA,cAAA,eAAA,uBACA,SAAAM,EAAAC,EAAA5C,EAAA2E,EAAAlE,EAAA0H,EAAAC,GACA5R,QAAAuM,KAAA,kBAEA,IAAAsF,GAAAD,EAAAE,aAAA,aAEAH,GAAA3I,WACAoD,EAAAa,GAAA,aAGAd,EAAAnD,UAAA2I,EAAA3I,UAEAmD,EAAAzD,KAAA,GAEAyD,EAAA4F,YACA5F,EAAAuD,UAAA,WACAvB,EAAAL,MAAAzD,SAAA,oBACAb,EAAAT,gBAAA4I,EAAA3I,WAAAnB,KAAA,SAAAqC,GACAiC,EAAA4F,SAAA7H,EACA2H,EAAAG,eACA7D,EAAAF,QACA,WACAE,EAAAF,UAIA9B,EAAAuD,YAEAvD,EAAA8F,YAAA,WACA9D,EAAAL,MAAAzD,SAAA,mBACAb,EAAAP,YAAA0I,EAAA3I,UAAAmD,EAAAzD,MAAAb,KAAA,WACAsG,EAAAF,OACA9B,EAAAzD,KAAA,GACAyD,EAAAuD,aACA,WACAvB,EAAAF,UAIA9B,EAAAK,IAAA,UAAA,WACAL,EAAAuD,iBCxCAxD,SAAAL,WAAA,mBAAA,SAAA,SAAA,gBAAA,OAAA,gBAAA,cAAA,SAAAM,EAAAC,EAAApC,EAAAR,EAAA2E,EAAAlE,GACAjK,QAAAuM,KAAA,mBACAvC,EAAAyF,eAEAtD,EAAA4F,YAEA5F,EAAAuD,UAAA,WACAvB,EAAAL,MAAAzD,SAAA,2BACAb,EAAAV,iBAAAjB,KAAA,SAAAqC,GACAiC,EAAA4F,SAAA7H,EACAiE,EAAAF,QACA,WACAE,EAAAF,UAIA9B,EAAAK,IAAA,UAAA,WACAL,EAAAuD,cAGAvD,EAAAuD,YAEAvD,EAAA+F,WAAA,WACA/F,EAAAyC,OACA5F,UAAA,GACAN,KAAA,GAGA,IAAAyJ,GAAAlI,EAAA6D,MACA1D,MAAA,cACAgI,SAAA,cACAxG,YAAA,kCACA6B,MAAAtB,EACAkG,UACA3J,KAAA,QACA4J,KAAA,mBAEA5J,KAAA,QACA4J,KAAA,kBACAC,MAAA,SAAApQ,GACAA,EAAAqQ,iBACArE,EAAAL,MAAAzD,SAAA,mBACAb,EAAAP,YAAAkD,EAAAyC,MAAA5F,UAAAmD,EAAAyC,MAAAlG,MAAAb,KAAA,WACAsG,EAAAF,OACAkE,EAAAM,QACAtG,EAAAuD,aACA,SAAA1K,GACAmJ,EAAAF,OACA,gBAAA,IACA9D,MAAAnF,WAQAmH,EAAAuG,SAAA,SAAA1J,GACAoD,EAAAa,GAAA,oBAAAjE,UAAAA,QC1DAkD,SAAAL,WAAA,sBAAA,SAAA,SAAA,gBAAA,OAAA,SAAAM,EAAAC,EAAApC,EAAAR,GACAxJ,QAAAuM,KAAA,sBAEAJ,EAAAmD,SACAnD,EAAAuD,UAAA,WACAlG,EAAAX,eAAAhB,KAAA,SAAAqC,GACAlK,QAAAC,IAAAiK,GACAiC,EAAAmD,MAAApF,KAIAiC,EAAAuD,YAEAvD,EAAAK,IAAA,UAAA,WACAL,EAAAuD,iBCdAxD,SAAAL,WAAA,oBAAA,SAAA,SAAA,gBAAA,OAAA,gBAAA,SAAAM,EAAAC,EAAApC,EAAAR,EAAA2E,GACAnO,QAAAuM,KAAA,oBAEAvC,EAAAyF,eAEAtD,EAAAwG,MACA/B,YAAApH,EAAAxD,QAAA4K,YACAC,aAAArH,EAAAxD,QAAA6K,aACA+B,eAAApJ,EAAAxD,QAAA4M,gBAGAzG,EAAA0G,aAAA,EACA1G,EAAA2G,UAAA,WACA3G,EAAA0G,cACA1G,EAAAwG,KAAA9B,aAAArH,EAAAxD,QAAA6K,aACA1E,EAAA0G,aAAA,IAIA1G,EAAA4G,eAAA,EACA5G,EAAA6G,YAAA,WACA7G,EAAA4G,gBACA5G,EAAAwG,KAAAC,eAAApJ,EAAAxD,QAAA4M,eACAzG,EAAA4G,eAAA,IAIA5G,EAAA8G,YAAA,EACA9G,EAAA+G,SAAA,WACA/G,EAAA8G,aACA9G,EAAAwG,KAAA/B,YAAApH,EAAAxD,QAAA4K,YACAzE,EAAA8G,YAAA,IAIA9G,EAAAnE,QAAA,WACAmG,EAAAL,MAAAzD,SAAA,sBACAb,EAAAxB,QAAAmE,EAAAwG,MAAA9K,KAAA,WACA2B,EAAAxD,QAAA6K,aAAA1E,EAAAwG,KAAA9B,aACArH,EAAAxD,QAAA4M,eAAAzG,EAAAwG,KAAAC,eACApJ,EAAAxD,QAAA4K,YAAAzE,EAAAwG,KAAA/B,YAEAzE,EAAA0G,aAAA,EACA1G,EAAA4G,eAAA,EACA5G,EAAA8G,YAAA,EACA9E,EAAAF,QACA,WACAE,EAAAF,UAIA9B,EAAAgH,eAAA,WACAC,SAAAC,eAAA,eAAAC,SAGAnH,EAAAoH,YAAA,SAAAnO,GACA,GAAAA,EAAAoO,MAAAnG,OAAA,EAAA,CACA,GAAAxK,GAAAuC,EAAAoO,MAAA,EAEArF,GAAAL,MAAAzD,SAAA,iBACAb,EAAA1C,aAAAjE,GAAAgF,KAAA,SAAAxF,GACA8L,EAAAF,OAEAzE,EAAAxD,QAAA4B,aAAAvF,EAEA8J,EAAAsH,SACAtH,EAAAuH,UACA,SAAA1O,GACAmJ,EAAAF,OACA,gBAAA,GACAhE,YAAAE,OAAAE,SAAArF,EAAAoF,MAAA,UAEAH,YAAAE,OAAAE,SAAA,qBAAAD,MAAA","file":"digilib.min.js","sourcesContent":["var lg = console.log.bind(console);\r\nvar lgi = console.log.bind(console);\r\nvar lge = console.log.bind(console);\r\nvar lgw = console.log.bind(console);\r\n\r\nvar app_version = 2;\r\nvar app_version_text = '0.1.2';\r\n\r\n\r\nvar apiUrl = \"http://localhost/perpus/api/\";\r\n//var apiUrl = \"http://perpustakaansd.labschool.upi.edu/api/\";\r\n\r\n\r\n//PROTOTYPES\r\nString.prototype.toTitleCase = function() {\r\n\treturn this.replace(/\\w\\S*/g, function(txt){return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();});\r\n};","var settingModule = angular.module(\"SettingModule\", []);\r\n\r\nsettingModule.factory(\"setting\", [\"$rootScope\", \"$q\", function($root, $q) {\r\n\r\n\treturn {\r\n\t\tset: function(key, data) {\r\n\t\t\tif (!window.localStorage)\r\n\t\t\t\treturn false;\r\n\r\n\t\t\tif (typeof data == \"object\") {\r\n\t\t\t\tdata = JSON.stringify(data);\r\n\t\t\t}\t\r\n\r\n\t\t\t/*if (!data || (data == \"null\"))\r\n\t\t\tconsole.info(\"remove local data \", key, data);*/\r\n\r\n\t\t\twindow.localStorage[key] = data;\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tget: function(key) {\r\n\t\t\tif (window.localStorage) {\r\n\t\t\t\tvar str = window.localStorage[key];\r\n\t\t\t\t//console.log(key, str);\r\n\t\t\t\tif (str) {\r\n\t\t\t\t\t\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tvar data = JSON.parse(str);\r\n\t\t\t\t\t\t/*console.log(\"get local data\", key, data);*/\r\n\t\t\t\t\t\treturn data;\r\n\t\t\t\t\t} catch(e) {\r\n\t\t\t\t\t\tif (str == \"undefined\") {\t\r\n\t\t\t\t\t\t\treturn undefined;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (str == \"false\") {\t\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn str;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\tif (str == \"undefined\") {\t\r\n\t\t\t\t\treturn undefined;\r\n\t\t\t\t}\r\n\t\t\t\tif (str == \"false\") {\t\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\t/*console.log(\"local data\", str);*/\r\n\t\t\t\treturn str;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\r\n\t\tresolveOnlineImage: function(url) {\r\n\t\t\tvar that = this;\r\n\r\n\t\t\tif (window.resolveLocalFileSystemURL) {\r\n\t\t\t\tvar defer = $q.defer();\r\n\r\n\t\t\t\tvar filename = url.split('/').lastValue;\r\n\r\n\t\t\t\tif (!filename)\r\n\t\t\t\t\treturn $q.when(url);\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\twindow.resolveLocalFileSystemURL(cordova.file.applicationStorageDirectory + filename, function(entry) {\r\n\t\t\t\t\t\t/* get data from local */\r\n\t\t\t\t\t\tconsole.log(\"get local image : \" + cordova.file.applicationStorageDirectory + filename);\r\n\r\n\t\t\t\t\t\tvar localUrl = entry.toURL();\t\t\t\t\t\t\r\n\t\t\t\t\t\tdefer.resolve(localUrl);\r\n\r\n\t\t\t\t\t}, function() {\r\n\t\t\t\t\t\t/* save image to local */\r\n\r\n\t\t\t\t\t\tif (FileTransfer) {\r\n\t\t\t\t\t\t\tvar ft = new FileTransfer();\r\n\t\t\t\t\t\t\tft.download(\r\n\t\t\t\t\t\t\t\turl, cordova.file.applicationStorageDirectory + filename,\r\n\t\t\t\t\t\t\t\tfunction(entry) {\r\n\t\t\t\t\t\t\t\t\tconsole.log(\"save online image : \" + cordova.file.applicationStorageDirectory + filename);\r\n\r\n\t\t\t\t\t\t\t\t\tvar localUrl = entry.toURL();\r\n\t\t\t\t\t\t\t\t\tdefer.resolve(localUrl);\r\n\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tfunction(error) {\r\n\t\t\t\t\t\t\t\t\tconsole.log(\"failed save online image\");\r\n\r\n\t\t\t\t\t\t\t\t\tdefer.resolve(url);\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\ttrue,\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tconsole.log('FileTransfer not supported');\r\n\t\t\t\t\t\t\tdefer.resolve(url);\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\treturn $q.when(url);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn defer.promise;\r\n\t\t\t} else {\r\n\t\t\t\t\r\n\t\t\t\tconsole.log('resolveLocalFileSystemURL not supported');\r\n\t\t\t\treturn $q.when(url);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n}]);\r\n\r\nsettingModule.run([\"$rootScope\", \"setting\", function($root, setting) {\r\n\r\n\t$root.setting = setting;\r\n}]);","var userModule = angular.module(\"UserModule\", [], [\"$httpProvider\", function($httpProvider) {\r\n\t$httpProvider.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';\r\n}]);\r\n\r\nuserModule.factory(\"user\", [\"$http\",\"$q\", \"$rootScope\", \"Upload\", \"setting\", function($http, $q, $root, Upload, setting) {\r\n\r\n\twindow.f = $http;\r\n\t\r\n\tvar key = window.localStorage[\"digilib-upi\"] || \"\";\r\n\tvar isLogin = false;\r\n\tvar withCookie = false;\r\n\tvar localProfile = setting.get(\"profile\") || {};\r\n\r\n\t$http.defaults.headers.common.token = key;\r\n\r\n\tfunction changeKey(newKey) {\r\n\t\tkey = newKey;\r\n\t\t$http.defaults.headers.common.token = key;\r\n\t\twindow.localStorage[\"digilib-upi\"] = key;\r\n\t\tconsole.log(\"change key\", key);\r\n\t}\r\n\tserialize = function(obj, prefix) {\r\n\t\tvar str = [];\r\n\t\tfor(var p in obj) {\r\n\t\t\tif (obj.hasOwnProperty(p)) {\r\n\t\t\t\tvar k = prefix ? prefix + \"[\" + p + \"]\" : p, v = obj[p];\r\n\t\t\t\tstr.push(typeof v == \"object\" ?\r\n\t\t\t\t\tserialize(v, k) :\r\n\t\t\t\t\tencodeURIComponent(k) + \"=\" + encodeURIComponent(v));\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn str.join(\"&\");\r\n\t};\r\n\tfunction createGetRequest(uri, saveCall) {\r\n\t\tvar defer  = $q.defer();\r\n\r\n\t\tif (uri.indexOf('?') >= 0) {\r\n\t\t\turi += '&buzzdata=' + (new Date()).getTime().toString();\r\n\t\t} else {\r\n\t\t\turi += '?buzzdata=' + (new Date()).getTime().toString();\r\n\t\t}\r\n\r\n\t\tvar promise = $http.get(apiUrl + uri).\r\n\t\tsuccess(function(data) {\r\n\t\t\tif (data.status) {\r\n\t\t\t\tdefer.resolve(data.data);\r\n\t\t\t} else {\r\n\t\t\t\tdefer.reject(data.message);\r\n\t\t\t}\r\n\t\t}).\r\n\t\tcatch(function(err) {\r\n\t\t\tdefer.reject(err);\r\n\t\t});\r\n\r\n\t\treturn defer.promise;\r\n\t}\r\n\tfunction createPostRequest(uri, params) {\r\n\t\tvar defer  = $q.defer();\r\n\r\n\t\tif (uri.indexOf('?') >= 0) {\r\n\t\t\turi += '&buzzdata=' + (new Date()).getTime().toString();\r\n\t\t} else {\r\n\t\t\turi += '?buzzdata=' + (new Date()).getTime().toString();\r\n\t\t}\r\n\r\n\t\tvar promise = $http.post(apiUrl + uri, serialize(params)).\r\n\t\tsuccess(function(data) {\r\n\t\t\tif (data.status) {\r\n\t\t\t\tdefer.resolve(data.data);\r\n\t\t\t} else {\r\n\t\t\t\tdefer.reject(data.message);\r\n\t\t\t}\r\n\t\t}).\r\n\t\tcatch(function(err) {\r\n\t\t\tdefer.reject(err);\r\n\t\t});\r\n\r\n\t\treturn defer.promise;\r\n\t}\r\n\tfunction createUploadRequest(uri, file, data) {\r\n\t\tvar defer = $q.defer();\r\n\r\n\t\tUpload.upload({\r\n\t\t\turl: apiUrl + uri,\r\n\t\t\tmethod: 'POST',\r\n\t\t\tfile: file,\r\n\t\t\tsendFieldsAs: 'form',\r\n\t\t\tfields: data\r\n\t\t}).progress(function (evt) {\r\n\t\t\tvar progressPercentage = parseInt(100.0 * evt.loaded / evt.total);\r\n\t\t\tdefer.notify(progressPercentage);\r\n\t\t}).success(function (data, status, headers, config) {\r\n\t\t\tif (data.status) {\r\n\t\t\t\tdefer.resolve(data.data);\r\n\t\t\t} else {\r\n\t\t\t\tdefer.reject(data.message);\r\n\t\t\t}\r\n\t\t}).error(function (data, status, headers, config) {\r\n\t\t\tdefer.reject(\"connection_failed\");\r\n\t\t});\r\n\r\n\t\treturn defer.promise;\r\n\t}\r\n\r\n\treturn {\r\n\t\tget profile() {\r\n\t\t\treturn localProfile;\r\n\t\t},\r\n\t\tset profile(val) {\r\n\t\t\tlocalProfile = val;\r\n\t\t},\r\n\t\tgetKey: function() {\r\n\t\t\treturn key;\r\n\t\t},\r\n\t\tsetKey: function(key) {\r\n\t\t\tchangeKey(key);\r\n\r\n\t\t\tif (key)\r\n\t\t\t\tisLogin = true;\r\n\t\t\tthis.cek();\r\n\t\t},\r\n\t\tisLogin: function() {\r\n\t\t\tlgi(\"isLogin\", isLogin);\r\n\t\t\treturn isLogin;\r\n\t\t},\r\n\t\tisLoginLocal: function() {\r\n\t\t\treturn (key !== \"\");\r\n\t\t},\r\n\t\tlogin: function(email, password) {\r\n\t\t\tvar defer = $q.defer();\r\n\t\t\tvar ini = this;\r\n\r\n\t\t\tvar credential = {email: email, password: password};\r\n\r\n\t\t\t$http.post(apiUrl + \"auth/login\", serialize(credential)).\r\n\t\t\tsuccess(function(data) {\r\n\t\t\t\tif (data.status) {\r\n\t\t\t\t\tif (data.data && data.data.token) {\r\n\t\t\t\t\t\tchangeKey(data.data.token);\r\n\r\n\t\t\t\t\t\tisLogin = true;\t\t\r\n\t\t\t\t\t\tini.cek();\r\n\t\t\t\t\t\tdefer.resolve(true);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdefer.reject(\"Gagal mengambil token login.\");\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (data.message && (typeof data.detail == \"string\")) {\r\n\t\t\t\t\t\tdefer.reject(data.detail);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdefer.reject(\"Username / Password salah\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}).\r\n\t\t\tcatch(function(err) {\r\n\t\t\t\tdefer.reject(err);\r\n\t\t\t});\r\n\r\n\t\t\treturn defer.promise;\r\n\t\t},\r\n\t\tregister: function(registerData) {\r\n\t\t\tvar defer = $q.defer();\r\n\t\t\tvar ini = this;\r\n\r\n\t\t\t$http.post(apiUrl + \"auth/register\", serialize(registerData)).\r\n\t\t\tsuccess(function(data) {\r\n\t\t\t\tif (data.status) {\r\n\t\t\t\t\tif (data.data && data.data.token) {\r\n\t\t\t\t\t\tchangeKey(data.data.token);\r\n\r\n\t\t\t\t\t\tisLogin = true;\t\t\r\n\t\t\t\t\t\tini.cek();\r\n\t\t\t\t\t\tdefer.resolve(true);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdefer.reject(\"Gagal mengambil token login.\");\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (data.message && (typeof data.message == \"string\")) {\r\n\t\t\t\t\t\tdefer.reject(data.message);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdefer.reject(\"Username / Password salah\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}).\r\n\t\t\tcatch(function(err) {\r\n\t\t\t\tdefer.reject(err);\r\n\t\t\t});\r\n\r\n\t\t\treturn defer.promise;\r\n\t\t},\r\n\t\tchangeAvatar: function(file) {\r\n\t\t\tvar defer = $q.defer();\r\n\r\n\t\t\tUpload.upload({\r\n\t\t\t\turl: apiUrl + \"user/avatar\",\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\tfile: file,\r\n\t\t\t\tsendFieldsAs: 'form',\r\n\t\t\t\tfields: {\r\n\t\t\t\t}\r\n\t\t\t}).progress(function (evt) {\r\n\t\t\t\tvar progressPercentage = parseInt(100.0 * evt.loaded / evt.total);\r\n\t\t\t\tdefer.notify(progressPercentage);\r\n\t\t\t}).success(function (data, status, headers, config) {\r\n\t\t\t\tconsole.log(data);\r\n\t\t\t\tif (data.status)\r\n\t\t\t\t\tdefer.resolve(data.data);\r\n\t\t\t\telse\r\n\t\t\t\t\tdefer.reject(false);\r\n\t\t\t}).error(function (data, status, headers, config) {\r\n\t\t\t\tconsole.log(data);\r\n\t\t\t\tdefer.reject(false);\r\n\t\t\t});\r\n\r\n\t\t\treturn defer.promise;\r\n\t\t},\r\n\t\tcekLocal: function() {\r\n\t\t\tlgi(\"cek local\", key);\r\n\r\n\t\t\tif (key === \"\") {\r\n\t\t\t\treturn $q.when({status: false});\r\n\t\t\t} else {\r\n\t\t\t\treturn $q.when({status: true});\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tcek: function() {\r\n\t\t\tvar defer = $q.defer();\r\n\t\t\tvar ini = this;\r\n\r\n\t\t\tif (key === \"\") {\r\n\t\t\t\treturn $q.when({status: false});\r\n\t\t\t}\r\n\r\n\t\t\t$http.get(apiUrl + \"user\").\r\n\t\t\tsuccess(function(data, status) {\r\n\t\t\t\tlgi(\"cek login\", data.status, data.data);\r\n\t\t\t\tif (data.status) {\r\n\t\t\t\t\tisLogin = true;\r\n\r\n\r\n\t\t\t\t\tini.profile = data.data;\r\n\t\t\t\t\tif (!ini.profile.member_image) {\r\n\t\t\t\t\t\tini.profile.member_image = \"img/default-user-image.png\";\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tsetting.resolveOnlineImage(ini.profile.member_image).then(function(url) {\r\n\t\t\t\t\t\t\tini.profile.member_image = url;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsetting.set(\"profile\", ini.profile);\r\n\r\n\t\t\t\t\tdefer.resolve(data.data);\r\n\r\n\t\t\t\t\t$root.$broadcast(\"onuser\", ini.profile);\r\n\r\n\t\t\t\t} else if (data.hasOwnProperty(\"status\")) {\r\n\t\t\t\t\tchangeKey(\"\");\r\n\t\t\t\t\tdefer.resolve(data);\r\n\t\t\t\t} else if (data.hasOwnProperty('message')) {\r\n\t\t\t\t\tdefer.reject(data.message);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdefer.reject(JSON.stringify(data));\r\n\t\t\t\t}\r\n\t\t\t}).\r\n\t\t\tcatch(function(err) {\r\n\t\t\t\tdefer.reject(JSON.stringify(err));\r\n\t\t\t});\r\n\r\n\t\t\treturn defer.promise;\r\n\t\t},\r\n\t\tchangeKey: changeKey,\r\n\t\tlogout: function() {\r\n\t\t\tvar defer  = $q.defer();\r\n\t\t\tvar promise = $http.get(apiUrl + \"logout\").\r\n\t\t\tsuccess(function(data) {\r\n\t\t\t\tisLogin = false;\r\n\t\t\t\tchangeKey(\"\");\r\n\t\t\t\tdefer.resolve(true);\r\n\t\t\t}).\r\n\t\t\tcatch(function(err) {\r\n\t\t\t\tisLogin = false;\r\n\t\t\t\tchangeKey(\"\");\r\n\t\t\t\tdefer.resolve(true);\r\n\t\t\t});\r\n\r\n\t\t\treturn defer.promise;\r\n\t\t},\r\n\t\tsaveBio: function(bio) {\r\n\t\t\treturn createPostRequest('user', bio);\r\n\t\t},\r\n\r\n\t\tgetBooks: function (params) {\r\n\t\t\tvar str = \"\";\r\n\t\t\tif (params) {\r\n\t\t\t\tstr = '?' + serialize(params);\r\n\t\t\t}\r\n\t\t\treturn createGetRequest('books' + str);\r\n\t\t},\r\n\t\tgetBook: function (biblio_id) {\r\n\t\t\t return createGetRequest('book/' + biblio_id);\r\n\t\t},\r\n\t\tgetBookRate: function (biblio_id) {\r\n\t\t\t return createGetRequest('book/' + biblio_id + '/rate');\r\n\t\t},\r\n\t\tsetBookRate: function (biblio_id, rate) {\r\n\t\t\t return createPostRequest('book/' + biblio_id + '/rate', {rate: rate});\r\n\t\t},\r\n\t\tgetBookComments: function (biblio_id) {\r\n\t\t\t return createGetRequest('book/' + biblio_id + '/comments');\r\n\t\t},\r\n\t\tsetBookComments: function (biblio_id, text) {\r\n\t\t\t return createPostRequest('book/' + biblio_id + '/comment', {text: text});\r\n\t\t},\r\n\t\tsetBookFav: function (biblio_id) {\r\n\t\t\t return createPostRequest('book/' + biblio_id + '/favorit');\r\n\t\t},\r\n\t\tunsetBookFav: function (biblio_id) {\r\n\t\t\t return createPostRequest('book/' + biblio_id + '/unfavorit');\r\n\t\t},\r\n\r\n\t\tgetBookLoans: function () {\r\n\t\t\t return createGetRequest('user/books');\r\n\t\t},\r\n\r\n\t\tgetMessageList: function() {\r\n\t\t\treturn createGetRequest('messages');\r\n\t\t},\r\n\t\tgetMessageTexts: function(member_id) {\r\n\t\t\treturn createGetRequest('message/' + member_id);\r\n\t\t},\r\n\t\tpostMessage: function(member_id, text) {\r\n\t\t\treturn createPostRequest('message', {\r\n\t\t\t\tmember_id: member_id,\r\n\t\t\t\ttext: text\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tgetTopics: function() {\r\n\t\t\treturn createGetRequest('books/topics');\r\n\t\t},\r\n\r\n\t\tgetNotif: function() {\r\n\t\t\treturn createGetRequest('notif');\r\n\t\t},\r\n\t\tpostNotifRead: function(ids) {\r\n\t\t\treturn createPostRequest('notif/read', {\r\n\t\t\t\tnotif_id: ids\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tgetVersion: function(v) {\r\n\t\t\treturn createGetRequest('check-version/' + v);\r\n\t\t}\r\n\t};\r\n\r\n}]);\r\n\r\nuserModule.run([\"user\", \"$rootScope\", \"$http\", \"$ionicPlatform\", \"$location\", function(user, $rootScope, $http, $ionicPlatform, $location) {\r\n\t$ionicPlatform.ready(function() {\r\n\t\tconsole.log(\"Ionic Ready\");\r\n\t\t$rootScope.user = user;\r\n\t\tuser.cek().then(function() {\r\n\r\n\t\t}, function() {\r\n\t\t\t$location.path('/login');\r\n\t\t});\r\n\t});\r\n}]);\r\n","var mainApp = angular.module('digilib', ['ionic', 'controllers', 'UserModule', 'SettingModule', 'ngFileUpload']);\r\n\r\nmainApp.run(['$ionicConfig', '$ionicPlatform', '$ionicHistory', '$rootScope', 'user', '$ionicPopup', function($ionicConfig, $ionicPlatform, $ionicHistory, $rootScope, user, $ionicPopup) {\r\n\r\n\tuser.getVersion(app_version).then(function(res) {\r\n\t\t$ionicPopup.alert({\r\n\t\t\ttitle: res.title,\r\n\t\t\ttemplate: res.text\r\n\t\t}).then(function() {\r\n\t\t\twindow.open(res.gplay, \"_system\");\r\n\t\t});\r\n\t});\r\n\r\n\t$rootScope.version_text = app_version_text;\r\n\r\n\t$ionicPlatform.ready(function() {\r\n\r\n\t\tif (window.cordova && window.cordova.plugins.Keyboard) {\r\n\t\t\tcordova.plugins.Keyboard.hideKeyboardAccessoryBar(true);\r\n\t\t\tcordova.plugins.Keyboard.disableScroll(true);\r\n\r\n\t\t}\r\n\t\tif (window.StatusBar) {\r\n\t\t\tStatusBar.styleDefault();\r\n\t\t}\r\n\t});\r\n\r\n\tif (screen.lockOrientation) {\r\n\t\tscreen.lockOrientation('portrait');\r\n\t}\r\n\r\n\t//$rootScope.user = user;\r\n\r\n}]);\r\n\r\nmainApp.config([\"$stateProvider\", \"$urlRouterProvider\", \"$ionicConfigProvider\", function($stateProvider, $urlRouterProvider, $ionicConfigProvider) {\r\n\t//$ionicConfigProvider.views.transition('ios');\r\n    $ionicConfigProvider.tabs.style('standard').position('bottom');\r\n    $ionicConfigProvider.navBar.alignTitle('center').positionPrimaryButtons('left');\r\n\r\n\t$stateProvider\r\n\r\n\t.state('app', {\r\n\t\turl: '/app',\r\n\t\tabstract: true,\r\n\t\ttemplateUrl: 'templates/index.html',\r\n\t\tcontroller: 'IndexController'\r\n\t})\r\n\r\n\t.state('app.koleksi', {\r\n\t\turl: '/koleksi',\r\n\t\tviews: {\r\n\t\t\thistoryRoot: true,\r\n\t\t\tcontent: {\r\n\t\t\t\ttemplateUrl: 'templates/koleksi.html',\r\n\t\t\t\tcontroller: 'KoleksiController'\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\r\n\t.state('app.profil', {\r\n\t\turl: '/profil',\r\n\t\tviews: {\r\n\t\t\tcontent: {\r\n\t\t\t\ttemplateUrl: 'templates/profil.html',\r\n\t\t\t\tcontroller: 'ProfilController'\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\r\n\t.state('app.buku', {\r\n\t\turl: '/buku/:id',\r\n\t\tviews: {\r\n\t\t\tcontent: {\r\n\t\t\t\ttemplateUrl: 'templates/buku.html',\r\n\t\t\t\tcontroller: 'BukuController'\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\r\n\t.state('app.buku-review', {\r\n\t\turl: '/buku/:id/review',\r\n\t\tviews: {\r\n\t\t\tcontent: {\r\n\t\t\t\ttemplateUrl: 'templates/buku-review.html',\r\n\t\t\t\tcontroller: 'BukuReviewController'\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\r\n\t.state('app.pesan', {\r\n\t\turl: '/pesan',\r\n\t\tviews: {\r\n\t\t\tcontent: {\r\n\t\t\t\ttemplateUrl: 'templates/pesan.html',\r\n\t\t\t\tcontroller: 'PesanController'\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\r\n\t.state('app.pesan-single', {\r\n\t\turl: '/pesan-single/:member_id',\r\n\t\tviews: {\r\n\t\t\tcontent: {\r\n\t\t\t\ttemplateUrl: 'templates/pesan-single.html',\r\n\t\t\t\tcontroller: 'PesanSingleController'\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\r\n\t.state('app.pemberitahuan', {\r\n\t\turl: '/pemberitahuan',\r\n\t\tviews: {\r\n\t\t\tcontent: {\r\n\t\t\t\ttemplateUrl: 'templates/pemberitahuan.html',\r\n\t\t\t\tcontroller: 'PemberitahuanController'\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\r\n\t.state('app.pinjaman', {\r\n\t\turl: '/pinjaman',\r\n\t\tviews: {\r\n\t\t\tcontent: {\r\n\t\t\t\ttemplateUrl: 'templates/pinjaman.html',\r\n\t\t\t\tcontroller: 'PinjamanController'\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\r\n\t.state('app.favorit', {\r\n\t\turl: '/favorit',\r\n\t\tviews: {\r\n\t\t\tcontent: {\r\n\t\t\t\ttemplateUrl: 'templates/favorit.html',\r\n\t\t\t\tcontroller: 'FavoritController'\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\r\n\t.state('app.send_feedback', {\r\n\t\turl: '/send-feedback',\r\n\t\tviews: {\r\n\t\t\tcontent: {\r\n\t\t\t\ttemplateUrl: 'templates/send-feedback.html',\r\n\t\t\t\tcontroller: 'SendFeedbackController'\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\r\n\t.state('app.pengaturan', {\r\n\t\turl: '/pengaturan',\r\n\t\tviews: {\r\n\t\t\tcontent: {\r\n\t\t\t\ttemplateUrl: 'templates/pengaturan.html',\r\n\t\t\t\tcontroller: 'PengaturanController'\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\r\n\t.state('login', {\r\n\t\turl: '/login',\r\n\t\ttemplateUrl: 'templates/login.html',\r\n\t\tcontroller: 'LoginController'\r\n\t})\r\n\t.state('register', {\r\n\t\turl: '/register',\r\n\t\ttemplateUrl: 'templates/login-register.html',\r\n\t\tcontroller: 'RegisterController'\r\n\t})\r\n\t;\r\n\r\n\t$urlRouterProvider.otherwise('/app/koleksi');\r\n  \r\n\r\n \r\n}]);\r\n","var controll = angular.module('controllers', []);\r\n\r\ncontroll.run(['$ionicPlatform', '$ionicHistory', '$rootScope', 'user', '$location', function($ionicPlatform, $ionicHistory, $rootScope, user, $location) {\r\n\tif (!user.isLoginLocal()) {\r\n\t\t$location.path('/login');\r\n\t}\r\n}]);\r\n\r\n\r\n/*\r\nMain Controller\r\n*/\r\ncontroll.controller('IndexController', ['$scope', '$state', '$ionicHistory', '$location', '$ionicSideMenuDelegate', 'user', '$ionicPopover', \r\n\tfunction($scope, $state, $ionicHistory, $location, $ionicSideMenuDelegate, user, $ionicPopover) {\r\n\tconsole.info(\"IndexController\");\r\n\r\n\t$scope.$on('$ionicView.enter', function(e, ts) {\r\n\t\t//lgi(\"enter\", e, ts);\r\n\t});\r\n\t$scope.$on('$ionicView.leave', function(e, fs) {\r\n\t\t//lgi(\"leave\", e, fs);\r\n\t});\r\n\r\n\t$scope.isBackButtonShow = function() {\r\n\t\treturn $ionicHistory.backView() !== null;\r\n\t};\r\n\t$scope.changeState = function(to) {\r\n\t\tif ($ionicSideMenuDelegate.isOpenLeft()) {\r\n\t\t\t$ionicSideMenuDelegate.toggleLeft();\r\n\t\t}\r\n\t\t$state.go(to);\r\n\t};\r\n\t$scope.getColor = function (id) {\r\n\t\tid = id || 0;\r\n\t\tvar colors = [\"#F44336\", \"#E91E63\", \"#9C27B0\", \"#673AB7\", \"#3F51B5\", \"#2196F3\", \"#E65100\", \"#33691E\", \"#827717\", \"#006064\", \"#01579B\", \"#009688\", \"#424242\"];\r\n\t\tif (id >= colors.length) {\r\n\t\t\tid = id % colors.length;\r\n\t\t}\r\n\r\n\t\treturn colors[id];\r\n\t};\r\n\t$scope.getBookThumbnail = function (url) {\r\n\t\tif (url) {\r\n\t\t\treturn url;\r\n\t\t}\r\n\t\treturn '';\r\n\t\t //return \"http://localhost/perpus/lib/phpthumb/phpThumb.php?src=../../images/docs/\" + argument + \"&w=100\";\r\n\t};\r\n\r\n\t$scope.getMemberAvatar = function (url) {\r\n\t\tif (url) {\r\n\t\t\treturn url;\r\n\t\t} else {\r\n\t\t\treturn 'img/default-user-image.png';\r\n\t\t}\r\n\t};\r\n\r\n\r\n\t/*\r\n\t * Popup Kanan Atas\r\n\t */\r\n\t$ionicPopover.fromTemplateUrl('menu-pop.html', {\r\n\t\tscope: $scope\r\n\t}).then(function(popover) {\r\n\t\t$scope.popTopRight = popover;\r\n\t});\r\n\t$scope.showRightMenu = function($event) {\r\n\t\t$scope.popTopRight.show($event);\r\n\t};\r\n\r\n\t$scope.$on('$destroy', function() {\r\n\t\t$scope.popTopRight.remove();\r\n\t});\r\n\r\n\t$scope.doViewRefresh = function() {\r\n\t\t$scope.popTopRight.hide();\r\n\r\n\t\t$scope.$broadcast('refresh');\r\n\t};\r\n\r\n\t$scope.doViewHelp = function() {\r\n\t\t$scope.popTopRight.hide();\r\n\t};\r\n}]);","controll.controller('BukuController', ['$scope', '$state', '$ionicHistory', 'user', '$ionicLoading', function($scope, $state, $ionicHistory, user, $ionicLoading) {\r\n\tconsole.info(\"Buku Controller\");\r\n\r\n\t$scope.id = $state.params.id;\r\n\t$scope.book = false;\r\n\t$scope.isFavorit = false;\r\n\r\n\t$ionicLoading.show({template: \"Mengambil Data Buku\"});\r\n\tuser.getBook($scope.id).then(function (res) {\r\n\t\tonGetBook(res);\t\r\n\t\t$ionicLoading.hide();\r\n\t}, function(err) {\r\n\t\t$ionicLoading.hide();\r\n\t\tconsole.log(err);\r\n\t});\r\n\r\n\t$scope.toggleFav = function () {\r\n\t\tif (!$scope.isFavorit) {\r\n\t\t\t$scope.isFavorit = true;\r\n\t\t\tuser.setBookFav($scope.id);\r\n\t\t} else {\r\n\t\t\t$scope.isFavorit = false;\r\n\t\t\tuser.unsetBookFav($scope.id);\r\n\t\t}\r\n\t};\r\n\r\n\tfunction onGetBook(res) {\r\n\t\t$scope.book = res;\r\n\r\n\t\tif (res.is_fav) {\r\n\t\t\t$scope.isFavorit = true;\r\n\t\t}\r\n\t}\r\n}]);\r\n\r\ncontroll.controller('BukuReviewController', ['$scope', '$state', '$ionicHistory', 'user', '$ionicLoading', '$ionicPopup',\r\n\tfunction($scope, $state, $ionicHistory, user, $ionicLoading, $ionicPopup) {\r\n\tconsole.info(\"Buku Controller\");\r\n\r\n\t$scope.id = $state.params.id;\r\n\t$scope.book = false;\r\n\t$scope.rating = 0;\r\n\t$scope.comments = [];\r\n\t$scope.input = {\r\n\t\tcomment: \"\"\r\n\t};\r\n\r\n\t$ionicLoading.show({template: \"Mengambil Data Buku\"});\r\n\tuser.getBook($scope.id).then(function (res) {\r\n\t\tonGetBook(res);\r\n\t\t $ionicLoading.hide();\r\n\t}, function(err) {\r\n\t\t$ionicLoading.hide();\r\n\t\tconsole.log(err);\r\n\t});\r\n\r\n\t$scope.setRating = function(n) {\r\n\t\t$scope.rating = n;\r\n\t\tuser.setBookRate($scope.id, n).then(function(res) {\r\n\t\t\tconsole.log(\"Set Rate Success\");\r\n\t\t});\r\n\t};\r\n\r\n\t$scope.doSendComment = function () {\r\n\t\t if (!$scope.input.comment) {\r\n\t\t \t$ionicPopup.alert({\r\n\t\t \t\ttitle: \"Data tidak lengkap\",\r\n\t\t \t\ttemplate: \"Kolom komentar harus diisi.\"\r\n\t\t \t});\r\n\t\t }\r\n\r\n\t\t user.setBookComments($scope.id, $scope.input.comment).then(function (res) {\r\n\t\t \t$scope.comments.unshift(res);\r\n\t\t \t $scope.input.comment = \"\";\r\n\t\t }, function (err) {\r\n\t\t \t if (typeof(err) == 'string') {\r\n\t\t \t \t$ionicPopup.alert({\r\n\t\t \t \t\ttitle: 'Gagal mengirim komentar',\r\n\t\t \t \t\ttemplate: err\r\n\t\t \t \t});\r\n\t\t \t }\r\n\t\t });\r\n\t};\r\n\r\n\tfunction onGetBook(res) {\r\n\t\t$scope.book = res;\r\n\t\tif (res.own_rate){\r\n\t\t\t$scope.rating = res.own_rate;\r\n\t\t} else {\r\n\t\t\t$scope.rating = 0;\r\n\t\t}\r\n\r\n\t\tuser.getBookComments($scope.id).then(function(res) {\r\n\t\t\t$scope.comments = res;\r\n\t\t});\r\n\t}\r\n}]);","controll.controller('FavoritController', ['$scope', '$state', '$ionicHistory', '$ionicLoading', 'user', function($scope, $state, $ionicHistory, $ionicLoading, user) {\r\n\tconsole.info('FavoritController');\r\n\r\n\tvar offset = 0;\r\n\tvar limit = 10;\r\n\tvar param = {\r\n\t\toffset: offset,\r\n\t\tlimit: limit,\r\n\t\tfavorit: 1\r\n\t};\r\n\r\n\t$scope.books = [];\r\n\t$scope.total = 0;\r\n\t$scope.search = {\r\n\t\ttext: ''\r\n\t};\r\n\r\n\t$scope.openBook = function(n) {\r\n\t\t$state.go(\"app.buku\", {id: n});\r\n\t};\r\n\r\n\t$ionicHistory.clearHistory();\r\n\r\n\t$scope.doRefresh = function(reset) {\r\n\t\t$ionicLoading.show({template: 'Mengambil Buku'});\r\n\t\tuser.getBooks(param).then(function(res) {\r\n\t\t\tif (reset) {\r\n\t\t\t\t$scope.books = res.results;\r\n\t\t\t} else {\r\n\t\t\t\t$scope.books = $scope.books.concat(res.results);\r\n\t\t\t}\r\n\t\t\t$scope.total = res.params.total;\r\n\t\t\t$ionicLoading.hide();\r\n\t\t}, function () {\r\n\t\t\t $ionicLoading.hide();\r\n\t\t});\r\n\t};\r\n\t$scope.doRefresh();\r\n\r\n\t$scope.doLoadMore = function () {\r\n\t\toffset += limit;\r\n\t\tparam.limit = limit;\r\n\t\tparam.offset = offset;\r\n\t\t$scope.doRefresh();\t \r\n\t};\r\n\r\n\t$scope.canLoadMore = function() {\r\n\t\t//console.log(offset, $scope.total);\r\n\t\treturn (offset + limit) < $scope.total;\r\n\t};\r\n\r\n\t$scope.doSearch = function() {\r\n\t\t//console.log(\"search \" + $scope.searchText);\r\n\t\toffset = 0;\r\n\t\tlimit = 10;\r\n\t\tparam = {\r\n\t\t\toffset: offset,\r\n\t\t\tlimit: limit,\r\n\t\t\ttitle: $scope.search.text\r\n\t\t};\r\n\t\t$scope.doRefresh(true);\r\n\t};\r\n\r\n\t$scope.doReset = function() {\r\n\t\toffset = 0;\r\n\t\tlimit = 10;\r\n\t\tparam = {\r\n\t\t\toffset: offset,\r\n\t\t\tlimit: limit,\r\n\t\t\tfavorit: 1\r\n\t\t};\r\n\t\t$scope.doRefresh(true);\r\n\t};\r\n\r\n\t$scope.$on(\"$ionicView.enter\", function() {\r\n\t\t$scope.doReset();\r\n\t});\r\n\r\n\t$scope.$on('refresh', function() {\r\n\t\t$scope.doReset();\r\n\t});\r\n\r\n}]);","controll.controller('SendFeedbackController', ['$scope', '$state', '$ionicHistory', 'user', function($scope, $state, $ionicHistory, user) {\r\n\tconsole.info('SendFeedbackController');\r\n\r\n\t$ionicHistory.clearHistory();\r\n\r\n}]);","controll.controller('KoleksiController', ['$scope', '$state', '$ionicHistory', '$ionicLoading', 'user', function($scope, $state, $ionicHistory, $ionicLoading, user) {\r\n\tconsole.info(\"Koleksi Controller\");\r\n\r\n\tvar offset = 0;\r\n\tvar limit = 10;\r\n\tvar param = {\r\n\t\toffset: offset,\r\n\t\tlimit: limit\r\n\t};\r\n\r\n\t$scope.sectionTitle = '';\r\n\t$scope.books = [];\r\n\t$scope.total = 0;\r\n\t$scope.search = {\r\n\t\ttext: ''\r\n\t};\r\n\t$scope.topics = [];\r\n\tuser.getTopics().then(function(res) {\r\n\t\t$scope.topics = res;\r\n\t});\r\n\r\n\t$scope.openBook = function(n) {\r\n\t\t$state.go(\"app.buku\", {id: n});\r\n\t};\r\n\r\n\t$ionicHistory.clearHistory();\r\n\r\n\t$scope.doRefresh = function(reset) {\r\n\t\t$ionicLoading.show({template: 'Mengambil Buku'});\r\n\t\tuser.getBooks(param).then(function(res) {\r\n\t\t\tif (reset) {\r\n\t\t\t\t$scope.books = res.results;\r\n\t\t\t} else {\r\n\t\t\t\t$scope.books = $scope.books.concat(res.results);\r\n\t\t\t}\r\n\t\t\t$scope.total = res.params.total;\r\n\r\n\t\t\tif (res.params && res.params.topic_name) {\r\n\t\t\t\t$scope.sectionTitle = 'Kategori : ' + res.params.topic_name.toTitleCase();\r\n\t\t\t} else if (res.params && res.params.title) {\r\n\t\t\t\t$scope.sectionTitle = 'Pencarian : ' + res.params.title.toTitleCase();\r\n\t\t\t} else {\r\n\t\t\t\t$scope.sectionTitle = false;\r\n\t\t\t}\r\n\r\n\t\t\t$ionicLoading.hide();\r\n\t\t}, function () {\r\n\t\t\t $ionicLoading.hide();\r\n\t\t});\r\n\t};\r\n\t$scope.doRefresh();\r\n\r\n\t$scope.doLoadMore = function () {\r\n\t\toffset += limit;\r\n\t\tparam.limit = limit;\r\n\t\tparam.offset = offset;\r\n\t\t$scope.doRefresh();\t \r\n\t};\r\n\r\n\t$scope.canLoadMore = function() {\r\n\t\t//console.log(offset, $scope.total);\r\n\t\treturn (offset + limit) < $scope.total;\r\n\t};\r\n\r\n\t$scope.doSearch = function() {\r\n\t\t//console.log(\"search \" + $scope.searchText);\r\n\t\toffset = 0;\r\n\t\tlimit = 10;\r\n\t\tparam = {\r\n\t\t\toffset: offset,\r\n\t\t\tlimit: limit,\r\n\t\t\ttitle: $scope.search.text\r\n\t\t};\r\n\t\t$scope.doRefresh(true);\r\n\t};\r\n\r\n\t$scope.doOpenTopic = function(topicId) {\r\n\t\toffset = 0;\r\n\t\tlimit = 10;\r\n\t\tparam = {\r\n\t\t\toffset: offset,\r\n\t\t\tlimit: limit,\r\n\t\t\ttopic: topicId\r\n\t\t};\r\n\t\t$scope.doRefresh(true);\r\n\t};\r\n\r\n\t$scope.doReset = function () {\r\n\t\toffset = 0;\r\n\t\tlimit = 10;\r\n\t\tparam = {\r\n\t\t\toffset: offset,\r\n\t\t\tlimit: limit\r\n\t\t};\r\n\t\t$scope.doRefresh(true);\r\n\t};\r\n\r\n\t$scope.$on('refresh', function() {\r\n\t\t$scope.doReset();\r\n\t});\r\n\r\n\r\n\t$scope.getBG = function(id) {\r\n\t\tvar colors = ['#daedf2', '#a5f7b3', '#f7f1a5', '#f7a5a5', '#c9bbf3', '#f3bbe2'];\r\n\t\treturn colors[id % colors.length];\r\n\t};\r\n\r\n}]);","controll.controller('LoginController', ['$scope', '$location', '$ionicHistory', 'user', '$ionicPopup', '$ionicLoading', function($scope, $location, $ionicHistory, user, $ionicPopup, $ionicLoading) {\r\n\tconsole.info('LoginController');\r\n\r\n\t$ionicHistory.clearHistory();\r\n\t$scope.data = {\r\n\t\tusername: '',\r\n\t\tpassword: ''\r\n\t};\r\n\r\n\t$scope.doLogin = function() {\r\n\t\tconsole.log(\"login\", $scope.data.username);\r\n\t\tif($scope.data.username === \"\") {\r\n\t\t\t$ionicPopup.alert({\r\n\t\t\t\ttemplate: \"Username / Email tidak boleh kosong.\",\r\n\t\t\t\ttitle: \"Data Tidak Lengkap\"\r\n\t\t\t});\r\n\t\t} else if ($scope.data.password === \"\") {\r\n\t\t\t$ionicPopup.alert({\r\n\t\t\t\ttemplate: \"Password tidak boleh kosong.\",\r\n\t\t\t\ttitle: \"Data Tidak Lengkap\"\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\t$ionicLoading.show({template: \"Memproses Login\"});\r\n\t\t\tuser.login($scope.data.username, $scope.data.password).then(function(res) {\r\n\t\t\t\t$location.path(\"/app/koleksi\");\r\n\t\t\t\t$ionicLoading.hide();\r\n\t\t\t}, function(err) {\r\n\t\t\t\t$ionicLoading.hide();\r\n\t\t\t\t$ionicPopup.alert({\r\n\t\t\t\t\ttemplate: err,\r\n\t\t\t\t\ttitle: \"Gagal\"\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\t$scope.openRegister = function() {\r\n\t\t$location.path('register');\r\n\t};\r\n\r\n}]);\r\n\r\n\r\ncontroll.controller('RegisterController', ['$scope', '$location', '$ionicHistory', 'user', '$ionicPopup', '$ionicLoading', function($scope, $location, $ionicHistory, user, $ionicPopup, $ionicLoading) {\r\n\tconsole.log(\"RegisterController\");\r\n\r\n\t$scope.data = {\r\n\t\tmember_id: '',\r\n\t\tmember_name: '',\r\n\t\temail: '',\r\n\t\tmember_phone: '',\r\n\t\tpassword: ''\r\n\t};\r\n\r\n\t$scope.openLogin = function() {\r\n\t\t$location.path('login');\r\n\t};\r\n\r\n\t$scope.doRegister = function() {\r\n\t\tvar mailtest = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n    \t\r\n\t\tif (!$scope.data.member_id || ($scope.data.member_id.length < 5)) {\r\n\t\t\t$ionicPopup.alert({\r\n\t\t\t\ttemplate: \"Member ID tidak boleh kosong. Minimal 5 Karakter.\",\r\n\t\t\t\ttitle: \"Data Tidak Lengkap\"\r\n\t\t\t});\r\n\t\t} else if (!$scope.data.member_name || ($scope.data.member_name.length < 5)) {\r\n\t\t\t$ionicPopup.alert({\r\n\t\t\t\ttemplate: \"Nama Lengkap tidak boleh kosong. Minimal 5 Karakter.\",\r\n\t\t\t\ttitle: \"Data Tidak Lengkap\"\r\n\t\t\t});\r\n\t\t} else if (!$scope.data.email) {\r\n\t\t\t$ionicPopup.alert({\r\n\t\t\t\ttemplate: \"Email tidak boleh kosong.\",\r\n\t\t\t\ttitle: \"Data Tidak Lengkap\"\r\n\t\t\t});\r\n\t\t} else if (!mailtest.test($scope.data.email)) {\r\n\t\t\t$ionicPopup.alert({\r\n\t\t\t\ttemplate: \"Format Email tidak benar.\",\r\n\t\t\t\ttitle: \"Data Tidak Lengkap\"\r\n\t\t\t});\r\n\t\t} else if (!$scope.data.member_phone && ($scope.data.member_phone.length < 5)) {\r\n\t\t\t$ionicPopup.alert({\r\n\t\t\t\ttemplate: \"Nomor HP tidak boleh kosong.\",\r\n\t\t\t\ttitle: \"Data Tidak Lengkap\"\r\n\t\t\t});\r\n\t\t} else if (!$scope.data.password || ($scope.data.password.length < 6) || ($scope.data.password != $scope.data.password2)) {\r\n\t\t\t$ionicPopup.alert({\r\n\t\t\t\ttemplate: \"Password tidak boleh kosong dan minimal mengandung 6 karakter. Kedua password harus sama.\",\r\n\t\t\t\ttitle: \"Data Tidak Lengkap\"\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\t$ionicLoading.show({template: \"Memproses Registrasi\"});\r\n\t\t\tuser.register($scope.data).then(function() {\r\n\t\t\t\t$location.path('/app/koleksi');\r\n\t\t\t\t$ionicLoading.hide();\r\n\t\t\t}, function(err) {\r\n\t\t\t\t$ionicLoading.hide();\r\n\t\t\t\t$ionicLoading.hide();\r\n\t\t\t\t$ionicPopup.alert({\r\n\t\t\t\t\ttemplate: err,\r\n\t\t\t\t\ttitle: \"Gagal\"\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n}]);","controll.controller('PemberitahuanController', ['$scope', '$state', '$ionicHistory', 'user', '$ionicLoading', function($scope, $state, $ionicHistory, user, $ionicLoading) {\r\n\tconsole.info(\"PemberitahuanController\");\r\n\r\n\t$ionicHistory.clearHistory();\r\n\r\n\t$scope.notifs = [];\r\n\r\n\t$scope.doRefresh = function() {\r\n\t\t$ionicLoading.show({template: 'Mengambil Data Notifikasi'});\r\n\t\tuser.getNotif().then(function(res) {\r\n\t\t\t$scope.notifs = res;\r\n\r\n\t\t\treads();\r\n\r\n\t\t\t$ionicLoading.hide();\r\n\t\t}, function() {\r\n\t\t\t$ionicLoading.hide();\r\n\t\t});\r\n\t};\r\n\r\n\t$scope.$on('refresh', function() {\r\n\t\t$scope.doRefresh();\r\n\t});\t\r\n\r\n\t$scope.doRefresh();\r\n\r\n\r\n\tfunction reads() {\r\n\t\tvar ids = [];\r\n\t\tfor (var i = 0; i < $scope.notifs.data.length; i++) {\r\n\t\t\tif ($scope.notifs.data[i].is_read === '0')\r\n\t\t\t\tids.push($scope.notifs.data[i].id);\r\n\t\t}\r\n\r\n\t\tif (ids.length) {\r\n\t\t\tuser.postNotifRead(ids).then(function(res) {\r\n\t\t\t\tconsole.log(\"Notif Read\", res);\r\n\t\t\t}, function() {\r\n\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t$scope.doOpen = function(notif) {\r\n\t\tif (notif.text.indexOf('mengirim pesan') === 0) {\r\n\t\t\t$state.go('app.pesan-single', {member_id: notif.from_id});\r\n\t\t}\r\n\t};\r\n}]);","controll.controller('PengaturanController', ['$scope', '$state', '$location', '$ionicHistory', 'user', function($scope, $state, $location, $ionicHistory, user) {\r\n\tconsole.info('PengaturanController');\r\n\r\n\t$ionicHistory.clearHistory();\r\n\r\n\r\n\t$scope.doLogout = function() {\r\n\t\t$location.path(\"/login\");\r\n\t};\r\n\r\n}]);","controll.controller('PesanSingleController', ['$scope', '$state', 'user', '$ionicLoading', '$ionicPopup', '$stateParams', '$ionicScrollDelegate',\r\n\tfunction($scope, $state, user, $ionicLoading, $ionicPopup, $stateParams, $ionicScrollDelegate) {\r\n\tconsole.info('PesanController');\r\n\r\n\tvar sdel = $ionicScrollDelegate.$getByHandle('chatScroll');\r\n\r\n\tif (!$stateParams.member_id) {\r\n\t\t$state.go('app.pesan');\r\n\t}\r\n\r\n\t$scope.member_id = $stateParams.member_id;\r\n\r\n\t$scope.text = '';\r\n\r\n\t$scope.messages = [];\r\n\t$scope.doRefresh = function() {\r\n\t\t$ionicLoading.show({template: 'Mengambil Pesan'});\r\n\t\tuser.getMessageTexts($stateParams.member_id).then(function(res) {\r\n\t\t\t$scope.messages = res;\r\n\t\t\tsdel.scrollBottom();\r\n\t\t\t$ionicLoading.hide();\r\n\t\t}, function() {\r\n\t\t\t$ionicLoading.hide();\r\n\t\t});\r\n\t};\r\n\r\n\t$scope.doRefresh();\r\n\r\n\t$scope.sendMessage = function() {\r\n\t\t$ionicLoading.show({template: 'Mengirim Pesan'});\r\n\t\tuser.postMessage($stateParams.member_id, $scope.text).then(function() {\r\n\t\t\t$ionicLoading.hide();\r\n\t\t\t$scope.text = '';\r\n\t\t\t$scope.doRefresh();\r\n\t\t}, function() {\r\n\t\t\t$ionicLoading.hide();\r\n\t\t});\r\n\t};\r\n\r\n\t$scope.$on('refresh', function() {\r\n\t\t$scope.doRefresh();\r\n\t});\t\r\n\r\n}]);","controll.controller('PesanController', ['$scope', '$state', '$ionicHistory', 'user', '$ionicLoading', '$ionicPopup', function($scope, $state, $ionicHistory, user, $ionicLoading, $ionicPopup) {\r\n\tconsole.info('PesanController');\r\n\t$ionicHistory.clearHistory();\r\n\r\n\t$scope.messages = [];\r\n\r\n\t$scope.doRefresh = function() {\r\n\t\t$ionicLoading.show({template: 'Mengambil Daftar Pesan'});\r\n\t\tuser.getMessageList().then(function(res) {\r\n\t\t\t$scope.messages = res;\r\n\t\t\t$ionicLoading.hide();\r\n\t\t}, function() {\r\n\t\t\t$ionicLoading.hide();\r\n\t\t});\r\n\t};\r\n\r\n\t$scope.$on('refresh', function() {\r\n\t\t$scope.doRefresh();\r\n\t});\t\r\n\r\n\t$scope.doRefresh();\r\n\r\n\t$scope.newMessage = function() {\r\n\t\t$scope.input = {\r\n\t\t\tmember_id: '',\r\n\t\t\ttext: ''\r\n\t\t};\r\n\r\n\t\tvar popup = $ionicPopup.show({\r\n\t\t\ttitle: 'Kirim Pesan',\r\n\t\t\tcssClass: 'new-message',\r\n\t\t\ttemplateUrl: 'templates/popup-newmessage.html',\r\n\t\t\tscope: $scope,\r\n\t\t\tbuttons: [{\r\n\t\t\t\ttext: 'Batal',\r\n\t\t\t\ttype: 'button-default'\r\n\t\t\t}, {\r\n\t\t\t\ttext: 'Kirim',\r\n\t\t\t\ttype: 'button-positive',\r\n\t\t\t\tonTap: function(e) {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t$ionicLoading.show({template: 'Mengirim Pesan'});\r\n\t\t\t\t\tuser.postMessage($scope.input.member_id, $scope.input.text).then(function() {\r\n\t\t\t\t\t\t$ionicLoading.hide();\r\n\t\t\t\t\t\tpopup.close();\r\n\t\t\t\t\t\t$scope.doRefresh();\r\n\t\t\t\t\t}, function(err) {\r\n\t\t\t\t\t\t$ionicLoading.hide();\r\n\t\t\t\t\t\tif (typeof(err) == 'string') {\r\n\t\t\t\t\t\t\talert(err);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}]\r\n\t\t});\r\n\t};\r\n\r\n\t$scope.openChat = function(member_id) {\r\n\t\t$state.go('app.pesan-single', {member_id: member_id});\r\n\t};\r\n\r\n}]);","controll.controller('PinjamanController', ['$scope', '$state', '$ionicHistory', 'user', function($scope, $state, $ionicHistory, user) {\r\n\tconsole.info('PinjamanController');\r\n\r\n\t$scope.books = [];\r\n\t$scope.doRefresh = function() {\r\n\t\tuser.getBookLoans().then(function(res){\r\n\t\t\tconsole.log(res);\r\n\t\t\t$scope.books = res;\r\n\t\t});\r\n\t};\r\n\r\n\t$scope.doRefresh();\r\n\r\n\t$scope.$on('refresh', function() {\r\n\t\t$scope.doRefresh();\r\n\t});\r\n\r\n}]);","controll.controller('ProfilController', ['$scope', '$state', '$ionicHistory', 'user', '$ionicLoading', function($scope, $state, $ionicHistory, user, $ionicLoading) {\r\n\tconsole.info('ProfilController');\r\n\r\n\t$ionicHistory.clearHistory();\r\n\r\n\t$scope.edit = {\r\n\t\tmember_name: user.profile.member_name,\r\n\t\tmember_phone: user.profile.member_phone,\r\n\t\tmember_address: user.profile.member_address\r\n\t};\r\n\r\n\t$scope.isEditPhone = false;\r\n\t$scope.editPhone = function() {\r\n\t\tif (!$scope.isEditPhone) {\r\n\t\t\t$scope.edit.member_phone = user.profile.member_phone;\r\n\t\t\t$scope.isEditPhone = true;\r\n\t\t}\r\n\t};\r\n\r\n\t$scope.isEditAddress = false;\r\n\t$scope.editAddress = function() {\r\n\t\tif (!$scope.isEditAddress) {\r\n\t\t\t$scope.edit.member_address = user.profile.member_address;\r\n\t\t\t$scope.isEditAddress = true;\r\n\t\t}\r\n\t};\r\n\r\n\t$scope.isEditName = false;\r\n\t$scope.editName = function() {\r\n\t\tif (!$scope.isEditName) {\r\n\t\t\t$scope.edit.member_name = user.profile.member_name;\r\n\t\t\t$scope.isEditName = true;\r\n\t\t}\r\n\t};\r\n\r\n\t$scope.saveBio = function() {\r\n\t\t$ionicLoading.show({template: 'Menyimpan Biodata'});\r\n\t\tuser.saveBio($scope.edit).then(function() {\r\n\t\t\tuser.profile.member_phone = $scope.edit.member_phone;\r\n\t\t\tuser.profile.member_address = $scope.edit.member_address;\r\n\t\t\tuser.profile.member_name = $scope.edit.member_name;\r\n\r\n\t\t\t$scope.isEditPhone = false;\r\n\t\t\t$scope.isEditAddress = false;\r\n\t\t\t$scope.isEditName = false;\r\n\t\t\t$ionicLoading.hide();\r\n\t\t}, function() {\r\n\t\t\t$ionicLoading.hide();\r\n\t\t});\r\n\t};\r\n\r\n\t$scope.doChangeAvatar = function() {\r\n\t\tdocument.getElementById(\"userImageEl\").click();\r\n\t};\r\n\t\r\n\t$scope.changeImage = function(f) {\r\n\t\tif (f.files.length > 0) {\r\n\t\t\tvar file = f.files[0];\r\n\r\n\t\t\t$ionicLoading.show({template: \"Ganti Profil\"});\r\n\t\t\tuser.changeAvatar(file).then(function(url) {\r\n\t\t\t\t$ionicLoading.hide();\r\n\r\n\t\t\t\tuser.profile.member_image = url;\r\n\r\n\t\t\t\tif (!$scope.$$phase)\r\n\t\t\t\t\t$scope.$apply();\r\n\t\t\t}, function(err) {\r\n\t\t\t\t$ionicLoading.hide();\r\n\t\t\t\tif (typeof(err) == 'string') {\r\n\t\t\t\t\t$ionicPopup.alert({template: err, title: \"Gagal\"});\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$ionicPopup.alert({template: \"Gagal ganti avatar\", title: \"Gagal\"});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n}]);"],"sourceRoot":"/source/"}