{"version":3,"sources":["config.js","module-notification.js","module-setting.js","module-user.js","app.js","controllers.js","controller-buku.js","controller-favorit.js","controller-feedback.js","controller-koleksi.js","controller-login.js","controller-pemberitahuan.js","controller-pengaturan.js","controller-pesan-single.js","controller-pesan.js","controller-pinjaman.js","controller-profil.js","controller-reservasi.js","controller-support.js"],"names":["lg","console","log","bind","lgi","lge","lgw","app_version","app_version_text","webUrl","apiUrl","String","prototype","toTitleCase","this","replace","txt","charAt","toUpperCase","substr","toLowerCase","Number","toStringZero","n","isM","ns","Math","abs","toString","length","pushModule","angular","module","factory","$http","$q","$root","_regId","regId","val","$broadcast","run","pushNotif","$ionicPlatform","$location","$timeout","SENDER_ID","ready","window","hasOwnProperty","push","PushNotification","init","android","senderID","forceShow","badge","ios","alert","sound","windows","on","data","registrationId","addData","additionalData","e","message","settingModule","set","key","localStorage","JSON","stringify","get","str","parse","resolveOnlineImage","url","resolveLocalFileSystemURL","defer","filename","split","lastValue","when","cordova","file","applicationStorageDirectory","entry","localUrl","toURL","resolve","FileTransfer","ft","download","error","promise","setting","userModule","$httpProvider","defaults","headers","post","Upload","changeKey","newKey","common","token","createGetRequest","uri","saveCall","indexOf","Date","getTime","success","status","reject","err","createPostRequest","params","serialize","f","isLogin","localProfile","obj","prefix","p","k","v","encodeURIComponent","join","profile","getKey","setKey","cek","isLoginLocal","login","email","password","ini","credential","updateRegId","detail","register","registerData","changeAvatar","upload","method","sendFieldsAs","fields","progress","evt","progressPercentage","parseInt","loaded","total","notify","config","cekLocal","member_image","then","logout","saveBio","bio","updateUserSetting","getBooks","getBook","biblio_id","getBookRate","setBookRate","rate","getBookComments","setBookComments","text","setBookFav","unsetBookFav","getBookLoans","getBookReserve","setBookReserve","unsetBookReserve","getMessageList","getMessageTexts","member_id","postMessage","getTopics","getNotif","postNotifRead","ids","notif_id","getVersion","getUserByMemberId","memberId","sendReport","reg_id","user","$rootScope","path","$on","mainApp","$ionicConfig","$ionicHistory","$ionicPopup","res","title","template","open","gplay","version_text","plugins","Keyboard","hideKeyboardAccessoryBar","disableScroll","StatusBar","styleDefault","screen","lockOrientation","autoStart","enable","$stateProvider","$urlRouterProvider","$ionicConfigProvider","tabs","style","position","navBar","alignTitle","positionPrimaryButtons","state","abstract","templateUrl","controller","views","historyRoot","content","otherwise","filter","input","d","m","r","getDate","getMonth","getFullYear","getHours","getMinutes","controll","notifCount","event","$$path","foreground","$scope","$state","$ionicSideMenuDelegate","$ionicPopover","info","ts","fs","isBackButtonShow","backView","changeState","to","isOpenLeft","toggleLeft","go","getColor","id","colors","getBookThumbnail","getMemberAvatar","fromTemplateUrl","scope","popover","popTopRight","showRightMenu","$event","show","remove","doViewRefresh","hide","doViewHelp","$ionicLoading","onGetBook","book","is_fav","isFavorit","is_reserve","isReserve","openUser","member","cssClass","buttons","type","onTap","sendMessage","popup","preventDefault","close","doRefresh","toggleFav","doReservasi","dontReservasi","doOpenUser","doShare","socialsharing","share","notes","image","own_rate","rating","comments","comment","setRating","doSendComment","unshift","offset","limit","param","favorit","books","search","openBook","clearHistory","reset","results","concat","doLoadMore","canLoadMore","doSearch","doReset","sectionTitle","topics","topic_name","doOpenTopic","topicId","topic","onTopicDown","canDragContent","onTopicUp","getBG","username","doLogin","openRegister","member_name","member_phone","openLogin","doRegister","mailtest","test","password2","reads","i","notifs","is_read","doOpen","notif","from_id","notif_email","notif_app","doUpdateSetting","doLogout","doOpenAbout","doOpenSupport","$stateParams","$ionicScrollDelegate","sdel","$getByHandle","messages","scrollBottom","newMessage","openChat","uploadFile","fileURL","FileUploadOptions","options","fileKey","fileName","lastIndexOf","mimeType","encodeURI","dres","response","edit","member_address","isEditPhone","editPhone","isEditAddress","editAddress","isEditName","editName","doChangeAvatar","imagePicker","getPictures","maximumImagesCount","width","document","getElementById","click","changeImage","files","doSend"],"mappings":"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","file":"digilib.min.js","sourcesContent":["var lg = console.log.bind(console);\r\nvar lgi = console.log.bind(console);\r\nvar lge = console.log.bind(console);\r\nvar lgw = console.log.bind(console);\r\n\r\nvar app_version = 45;\r\nvar app_version_text = '0.4.5';\r\n\r\nvar webUrl = \"http://perpustakaansd.labschool.upi.edu/\";\r\n\r\nvar apiUrl = \"http://localhost/perpus/api/\";\r\n//var apiUrl = \"http://perpustakaansd.labschool.upi.edu/api/\";\r\n\r\n\r\n//PROTOTYPES\r\nString.prototype.toTitleCase = function() {\r\n\treturn this.replace(/\\w\\S*/g, function(txt){return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();});\r\n};\r\n\r\nNumber.prototype.toStringZero = function(n) {\r\n\tvar isM = this < 0;\r\n\tvar ns = Math.abs(this).toString();\r\n\twhile (ns.length < n) ns = '0' + ns;\r\n\tif (isM) ns = '-' + ns;\r\n\treturn ns;\r\n};","var pushModule = angular.module(\"PushModule\", []);\r\n\r\npushModule.factory(\"pushNotif\", [\"$http\",\"$q\", \"$rootScope\", function($http, $q, $root) {\r\n\r\n\tvar _regId = \"\";\r\n\treturn {\r\n\t\tget regId() {\r\n\t\t\treturn _regId;\r\n\t\t},\r\n\t\tset regId(val) {\r\n\t\t\t_regId = val;\r\n\r\n\t\t\t$root.$broadcast(\"push-registered\");\r\n\t\t}\r\n\t};\r\n\r\n}]);\r\n\r\npushModule.run([\"pushNotif\", \"$rootScope\", \"$ionicPlatform\", \"$location\", \"$timeout\", function(pushNotif, $root, $ionicPlatform, $location, $timeout) {\r\n\tvar SENDER_ID = '247698159584';\r\n\r\n\t$ionicPlatform.ready(function() {\r\n\t\tif (window.hasOwnProperty('PushNotification')) {\r\n\r\n\t\t\t/* Push Notification */\r\n\t\t\tvar push = PushNotification.init({\r\n\t\t\t\tandroid: {\r\n\t\t\t\t\tsenderID: SENDER_ID,\r\n\t\t\t\t\tforceShow: false,\r\n\t\t\t\t\tbadge: true\r\n\t\t\t\t},\r\n\t\t\t\tios: {\r\n\t\t\t\t\talert: \"true\",\r\n\t\t\t\t\tbadge: true,\r\n\t\t\t\t\tsound: 'true'\r\n\t\t\t\t},\r\n\t\t\t\twindows: {}\r\n\t\t\t});\r\n\r\n\t\t\tpush.on('registration', function(data) {\r\n\t\t\t\t//alert(JSON.stringify(data));\r\n\t\t\t\tpushNotif.regId = data.registrationId;\r\n\t\t\t});\r\n\r\n\t\t\tpush.on('notification', function(data) {\r\n\t\t\t\t//alert(JSON.stringify(data));\r\n\t\t\t    //alert(data.message+ ':' + data.title+ ':' + data.count+ ':' + data.sound+ ':' + data.image + ':' + data.additionalData);\r\n\t\t\t    console.log(data);\r\n\t\t\t    if (data.hasOwnProperty('additionalData')) {\r\n\t\t\t    \tvar addData = data.additionalData;\r\n\t\t\t    \t$root.$broadcast(\"notification\", addData);\r\n\t\t\t    }\r\n\t\t\t});\r\n\r\n\t\t\tpush.on('error', function(e) {\r\n\t\t\t\tconsole.log(e.message);\r\n\t\t\t    //alert(e.message);\r\n\t\t\t});\r\n\r\n\t\t\t/*push.setApplicationIconBadgeNumber(function() {\r\n\t\t\t    alert('success');\r\n\t\t\t}, function() {\r\n\t\t\t    alert('error');\r\n\t\t\t}, 2);*/\r\n\r\n\t\t\t//alert(\"Push Notification Set\");\r\n\r\n\t\t} else {\r\n\t\t\t//alert(\"PUSH NOTIFICATION NOT INSTALLED\");\r\n\t\t}\r\n\t});\r\n}]);","var settingModule = angular.module(\"SettingModule\", []);\r\n\r\nsettingModule.factory(\"setting\", [\"$rootScope\", \"$q\", function($root, $q) {\r\n\r\n\treturn {\r\n\t\tset: function(key, data) {\r\n\t\t\tif (!window.localStorage)\r\n\t\t\t\treturn false;\r\n\r\n\t\t\tif (typeof data == \"object\") {\r\n\t\t\t\tdata = JSON.stringify(data);\r\n\t\t\t}\t\r\n\r\n\t\t\t/*if (!data || (data == \"null\"))\r\n\t\t\tconsole.info(\"remove local data \", key, data);*/\r\n\r\n\t\t\twindow.localStorage[key] = data;\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tget: function(key) {\r\n\t\t\tif (window.localStorage) {\r\n\t\t\t\tvar str = window.localStorage[key];\r\n\t\t\t\t//console.log(key, str);\r\n\t\t\t\tif (str) {\r\n\t\t\t\t\t\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tvar data = JSON.parse(str);\r\n\t\t\t\t\t\t/*console.log(\"get local data\", key, data);*/\r\n\t\t\t\t\t\treturn data;\r\n\t\t\t\t\t} catch(e) {\r\n\t\t\t\t\t\tif (str == \"undefined\") {\t\r\n\t\t\t\t\t\t\treturn undefined;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (str == \"false\") {\t\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn str;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\tif (str == \"undefined\") {\t\r\n\t\t\t\t\treturn undefined;\r\n\t\t\t\t}\r\n\t\t\t\tif (str == \"false\") {\t\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\t/*console.log(\"local data\", str);*/\r\n\t\t\t\treturn str;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\r\n\t\tresolveOnlineImage: function(url) {\r\n\t\t\tvar that = this;\r\n\r\n\t\t\tif (window.resolveLocalFileSystemURL) {\r\n\t\t\t\tvar defer = $q.defer();\r\n\r\n\t\t\t\tvar filename = url.split('/').lastValue;\r\n\r\n\t\t\t\tif (!filename)\r\n\t\t\t\t\treturn $q.when(url);\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\twindow.resolveLocalFileSystemURL(cordova.file.applicationStorageDirectory + filename, function(entry) {\r\n\t\t\t\t\t\t/* get data from local */\r\n\t\t\t\t\t\tconsole.log(\"get local image : \" + cordova.file.applicationStorageDirectory + filename);\r\n\r\n\t\t\t\t\t\tvar localUrl = entry.toURL();\t\t\t\t\t\t\r\n\t\t\t\t\t\tdefer.resolve(localUrl);\r\n\r\n\t\t\t\t\t}, function() {\r\n\t\t\t\t\t\t/* save image to local */\r\n\r\n\t\t\t\t\t\tif (FileTransfer) {\r\n\t\t\t\t\t\t\tvar ft = new FileTransfer();\r\n\t\t\t\t\t\t\tft.download(\r\n\t\t\t\t\t\t\t\turl, cordova.file.applicationStorageDirectory + filename,\r\n\t\t\t\t\t\t\t\tfunction(entry) {\r\n\t\t\t\t\t\t\t\t\tconsole.log(\"save online image : \" + cordova.file.applicationStorageDirectory + filename);\r\n\r\n\t\t\t\t\t\t\t\t\tvar localUrl = entry.toURL();\r\n\t\t\t\t\t\t\t\t\tdefer.resolve(localUrl);\r\n\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tfunction(error) {\r\n\t\t\t\t\t\t\t\t\tconsole.log(\"failed save online image\");\r\n\r\n\t\t\t\t\t\t\t\t\tdefer.resolve(url);\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\ttrue,\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tconsole.log('FileTransfer not supported');\r\n\t\t\t\t\t\t\tdefer.resolve(url);\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\treturn $q.when(url);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn defer.promise;\r\n\t\t\t} else {\r\n\t\t\t\t\r\n\t\t\t\tconsole.log('resolveLocalFileSystemURL not supported');\r\n\t\t\t\treturn $q.when(url);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n}]);\r\n\r\nsettingModule.run([\"$rootScope\", \"setting\", function($root, setting) {\r\n\r\n\t$root.setting = setting;\r\n}]);","var userModule = angular.module(\"UserModule\", [], [\"$httpProvider\", function($httpProvider) {\r\n\t$httpProvider.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';\r\n}]);\r\n\r\nuserModule.factory(\"user\", [\"$http\",\"$q\", \"$rootScope\", \"Upload\", \"setting\", \"pushNotif\", function($http, $q, $root, Upload, setting, pushNotif) {\r\n\r\n\twindow.f = $http;\r\n\t\r\n\tvar key = window.localStorage[\"digilib-upi\"] || \"\";\r\n\tvar isLogin = false;\r\n\tvar withCookie = false;\r\n\tvar localProfile = setting.get(\"profile\") || {};\r\n\r\n\t$http.defaults.headers.common.token = key;\r\n\r\n\tfunction changeKey(newKey) {\r\n\t\tkey = newKey;\r\n\t\t$http.defaults.headers.common.token = key;\r\n\t\twindow.localStorage[\"digilib-upi\"] = key;\r\n\t\tconsole.log(\"change key\", key);\r\n\t}\r\n\tserialize = function(obj, prefix) {\r\n\t\tvar str = [];\r\n\t\tfor(var p in obj) {\r\n\t\t\tif (obj.hasOwnProperty(p)) {\r\n\t\t\t\tvar k = prefix ? prefix + \"[\" + p + \"]\" : p, v = obj[p];\r\n\t\t\t\tstr.push(typeof v == \"object\" ?\r\n\t\t\t\t\tserialize(v, k) :\r\n\t\t\t\t\tencodeURIComponent(k) + \"=\" + encodeURIComponent(v));\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn str.join(\"&\");\r\n\t};\r\n\tfunction createGetRequest(uri, saveCall) {\r\n\t\tvar defer  = $q.defer();\r\n\r\n\t\tif (uri.indexOf('?') >= 0) {\r\n\t\t\turi += '&buzzdata=' + (new Date()).getTime().toString();\r\n\t\t} else {\r\n\t\t\turi += '?buzzdata=' + (new Date()).getTime().toString();\r\n\t\t}\r\n\r\n\t\tvar promise = $http.get(apiUrl + uri).\r\n\t\tsuccess(function(data) {\r\n\t\t\tif (data.status) {\r\n\t\t\t\tdefer.resolve(data.data);\r\n\t\t\t} else {\r\n\t\t\t\tdefer.reject(data.message);\r\n\t\t\t}\r\n\t\t}).\r\n\t\tcatch(function(err) {\r\n\t\t\tdefer.reject(err);\r\n\t\t});\r\n\r\n\t\treturn defer.promise;\r\n\t}\r\n\tfunction createPostRequest(uri, params) {\r\n\t\tvar defer  = $q.defer();\r\n\r\n\t\tif (uri.indexOf('?') >= 0) {\r\n\t\t\turi += '&buzzdata=' + (new Date()).getTime().toString();\r\n\t\t} else {\r\n\t\t\turi += '?buzzdata=' + (new Date()).getTime().toString();\r\n\t\t}\r\n\r\n\t\tvar promise = $http.post(apiUrl + uri, serialize(params)).\r\n\t\tsuccess(function(data) {\r\n\t\t\tif (data.status) {\r\n\t\t\t\tdefer.resolve(data.data);\r\n\t\t\t} else {\r\n\t\t\t\tdefer.reject(data.message);\r\n\t\t\t}\r\n\t\t}).\r\n\t\tcatch(function(err) {\r\n\t\t\tdefer.reject(err);\r\n\t\t});\r\n\r\n\t\treturn defer.promise;\r\n\t}\r\n\tfunction createUploadRequest(uri, file, data) {\r\n\t\tvar defer = $q.defer();\r\n\r\n\t\tUpload.upload({\r\n\t\t\turl: apiUrl + uri,\r\n\t\t\tmethod: 'POST',\r\n\t\t\tfile: file,\r\n\t\t\tsendFieldsAs: 'form',\r\n\t\t\tfields: data\r\n\t\t}).progress(function (evt) {\r\n\t\t\tvar progressPercentage = parseInt(100.0 * evt.loaded / evt.total);\r\n\t\t\tdefer.notify(progressPercentage);\r\n\t\t}).success(function (data, status, headers, config) {\r\n\t\t\tif (data.status) {\r\n\t\t\t\tdefer.resolve(data.data);\r\n\t\t\t} else {\r\n\t\t\t\tdefer.reject(data.message);\r\n\t\t\t}\r\n\t\t}).error(function (data, status, headers, config) {\r\n\t\t\tdefer.reject(\"connection_failed\");\r\n\t\t});\r\n\r\n\t\treturn defer.promise;\r\n\t}\r\n\r\n\treturn {\r\n\t\tget profile() {\r\n\t\t\treturn localProfile;\r\n\t\t},\r\n\t\tset profile(val) {\r\n\t\t\tlocalProfile = val;\r\n\t\t},\r\n\t\tgetKey: function() {\r\n\t\t\treturn key;\r\n\t\t},\r\n\t\tsetKey: function(key) {\r\n\t\t\tchangeKey(key);\r\n\r\n\t\t\tif (key)\r\n\t\t\t\tisLogin = true;\r\n\t\t\tthis.cek();\r\n\t\t},\r\n\t\tisLogin: function() {\r\n\t\t\tlgi(\"isLogin\", isLogin);\r\n\t\t\treturn isLogin;\r\n\t\t},\r\n\t\tisLoginLocal: function() {\r\n\t\t\treturn (key !== \"\");\r\n\t\t},\r\n\t\tlogin: function(email, password) {\r\n\t\t\tvar defer = $q.defer();\r\n\t\t\tvar ini = this;\r\n\r\n\t\t\tvar credential = {email: email, password: password};\r\n\r\n\t\t\t$http.post(apiUrl + \"auth/login\", serialize(credential)).\r\n\t\t\tsuccess(function(data) {\r\n\t\t\t\tif (data.status) {\r\n\t\t\t\t\tif (data.data && data.data.token) {\r\n\t\t\t\t\t\tchangeKey(data.data.token);\r\n\r\n\t\t\t\t\t\tisLogin = true;\r\n\t\t\t\t\t\tini.cek();\r\n\r\n\t\t\t\t\t\tif (pushNotif.regId) {\r\n\t\t\t\t\t\t\tini.updateRegId(pushNotif.regId);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tdefer.resolve(true);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdefer.reject(\"Gagal mengambil token login.\");\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (data.message && (typeof data.detail == \"string\")) {\r\n\t\t\t\t\t\tdefer.reject(data.detail);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdefer.reject(\"Username / Password salah\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}).\r\n\t\t\tcatch(function(err) {\r\n\t\t\t\tdefer.reject(err);\r\n\t\t\t});\r\n\r\n\t\t\treturn defer.promise;\r\n\t\t},\r\n\t\tregister: function(registerData) {\r\n\t\t\tvar defer = $q.defer();\r\n\t\t\tvar ini = this;\r\n\r\n\t\t\t$http.post(apiUrl + \"auth/register\", serialize(registerData)).\r\n\t\t\tsuccess(function(data) {\r\n\t\t\t\tif (data.status) {\r\n\t\t\t\t\tif (data.data && data.data.token) {\r\n\t\t\t\t\t\tchangeKey(data.data.token);\r\n\r\n\t\t\t\t\t\tisLogin = true;\t\t\r\n\t\t\t\t\t\tini.cek();\r\n\r\n\t\t\t\t\t\tif (pushNotif.regId) {\r\n\t\t\t\t\t\t\tini.updateRegId(pushNotif.regId);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tdefer.resolve(true);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdefer.reject(\"Gagal mengambil token login.\");\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (data.message && (typeof data.message == \"string\")) {\r\n\t\t\t\t\t\tdefer.reject(data.message);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdefer.reject(\"Username / Password salah\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}).\r\n\t\t\tcatch(function(err) {\r\n\t\t\t\tdefer.reject(err);\r\n\t\t\t});\r\n\r\n\t\t\treturn defer.promise;\r\n\t\t},\r\n\t\tchangeAvatar: function(file) {\r\n\t\t\tvar defer = $q.defer();\r\n\r\n\t\t\tUpload.upload({\r\n\t\t\t\turl: apiUrl + \"user/avatar\",\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\tfile: file,\r\n\t\t\t\tsendFieldsAs: 'form',\r\n\t\t\t\tfields: {\r\n\t\t\t\t}\r\n\t\t\t}).progress(function (evt) {\r\n\t\t\t\tvar progressPercentage = parseInt(100.0 * evt.loaded / evt.total);\r\n\t\t\t\tdefer.notify(progressPercentage);\r\n\t\t\t}).success(function (data, status, headers, config) {\r\n\t\t\t\tconsole.log(data);\r\n\t\t\t\tif (data.status)\r\n\t\t\t\t\tdefer.resolve(data.data);\r\n\t\t\t\telse\r\n\t\t\t\t\tdefer.reject(false);\r\n\t\t\t}).error(function (data, status, headers, config) {\r\n\t\t\t\tconsole.log(data);\r\n\t\t\t\tdefer.reject(false);\r\n\t\t\t});\r\n\r\n\t\t\treturn defer.promise;\r\n\t\t},\r\n\t\tcekLocal: function() {\r\n\t\t\tlgi(\"cek local\", key);\r\n\r\n\t\t\tif (key === \"\") {\r\n\t\t\t\treturn $q.when({status: false});\r\n\t\t\t} else {\r\n\t\t\t\treturn $q.when({status: true});\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tcek: function() {\r\n\t\t\tvar defer = $q.defer();\r\n\t\t\tvar ini = this;\r\n\r\n\t\t\tif (key === \"\") {\r\n\t\t\t\treturn $q.when({status: false});\r\n\t\t\t}\r\n\r\n\t\t\t$http.get(apiUrl + \"user\").\r\n\t\t\tsuccess(function(data, status) {\r\n\t\t\t\tlgi(\"cek login\", data.status, data.data);\r\n\t\t\t\tif (data.status) {\r\n\t\t\t\t\tisLogin = true;\r\n\r\n\r\n\t\t\t\t\tini.profile = data.data;\r\n\t\t\t\t\tif (!ini.profile.member_image) {\r\n\t\t\t\t\t\tini.profile.member_image = \"img/default-user-image.png\";\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tsetting.resolveOnlineImage(ini.profile.member_image).then(function(url) {\r\n\t\t\t\t\t\t\tini.profile.member_image = url;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsetting.set(\"profile\", ini.profile);\r\n\r\n\t\t\t\t\tdefer.resolve(data.data);\r\n\r\n\t\t\t\t\t$root.$broadcast(\"onuser\", ini.profile);\r\n\r\n\t\t\t\t} else if (data.hasOwnProperty(\"status\") && (data.message == \"forbidden\")) {\r\n\t\t\t\t\tchangeKey(\"\");\r\n\t\t\t\t\tdefer.reject(data);\r\n\t\t\t\t} else if (data.hasOwnProperty('message')) {\r\n\t\t\t\t\tdefer.reject(data.message);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdefer.reject(JSON.stringify(data));\r\n\t\t\t\t}\r\n\t\t\t}).\r\n\t\t\tcatch(function(err) {\r\n\t\t\t\tdefer.reject(JSON.stringify(err));\r\n\t\t\t});\r\n\r\n\t\t\treturn defer.promise;\r\n\t\t},\r\n\t\tchangeKey: changeKey,\r\n\t\tlogout: function() {\r\n\t\t\tvar defer  = $q.defer();\r\n\t\t\tvar promise = $http.get(apiUrl + \"logout\").\r\n\t\t\tsuccess(function(data) {\r\n\t\t\t\tisLogin = false;\r\n\t\t\t\tchangeKey(\"\");\r\n\t\t\t\tdefer.resolve(true);\r\n\t\t\t}).\r\n\t\t\tcatch(function(err) {\r\n\t\t\t\tisLogin = false;\r\n\t\t\t\tchangeKey(\"\");\r\n\t\t\t\tdefer.resolve(true);\r\n\t\t\t});\r\n\r\n\t\t\treturn defer.promise;\r\n\t\t},\r\n\t\tsaveBio: function(bio) {\r\n\t\t\treturn createPostRequest('user', bio);\r\n\t\t},\r\n\r\n\t\tupdateUserSetting: function(setting) {\r\n\t\t\treturn createPostRequest('user/setting', setting);\r\n\t\t},\r\n\r\n\t\tgetBooks: function (params) {\r\n\t\t\tvar str = \"\";\r\n\t\t\tif (params) {\r\n\t\t\t\tstr = '?' + serialize(params);\r\n\t\t\t}\r\n\t\t\treturn createGetRequest('books' + str);\r\n\t\t},\r\n\t\tgetBook: function (biblio_id) {\r\n\t\t\t return createGetRequest('book/' + biblio_id);\r\n\t\t},\r\n\t\tgetBookRate: function (biblio_id) {\r\n\t\t\t return createGetRequest('book/' + biblio_id + '/rate');\r\n\t\t},\r\n\t\tsetBookRate: function (biblio_id, rate) {\r\n\t\t\t return createPostRequest('book/' + biblio_id + '/rate', {rate: rate});\r\n\t\t},\r\n\t\tgetBookComments: function (biblio_id) {\r\n\t\t\t return createGetRequest('book/' + biblio_id + '/comments');\r\n\t\t},\r\n\t\tsetBookComments: function (biblio_id, text) {\r\n\t\t\t return createPostRequest('book/' + biblio_id + '/comment', {text: text});\r\n\t\t},\r\n\t\tsetBookFav: function (biblio_id) {\r\n\t\t\t return createPostRequest('book/' + biblio_id + '/favorit');\r\n\t\t},\r\n\t\tunsetBookFav: function (biblio_id) {\r\n\t\t\t return createPostRequest('book/' + biblio_id + '/unfavorit');\r\n\t\t},\r\n\r\n\t\tgetBookLoans: function () {\r\n\t\t\t return createGetRequest('user/books');\r\n\t\t},\r\n\t\tgetBookReserve: function() {\r\n\t\t\treturn createGetRequest('books/reserve');\r\n\t\t},\r\n\t\tsetBookReserve: function(biblio_id) {\r\n\t\t\treturn createPostRequest('books/reserve', {biblio_id: biblio_id});\r\n\t\t},\r\n\t\tunsetBookReserve: function(biblio_id) {\r\n\t\t\treturn createPostRequest('books/unset-reserve', {biblio_id: biblio_id});\r\n\t\t},\r\n\r\n\t\tgetMessageList: function() {\r\n\t\t\treturn createGetRequest('messages');\r\n\t\t},\r\n\t\tgetMessageTexts: function(member_id) {\r\n\t\t\treturn createGetRequest('message/' + member_id);\r\n\t\t},\r\n\t\tpostMessage: function(member_id, text) {\r\n\t\t\treturn createPostRequest('message', {\r\n\t\t\t\tmember_id: member_id,\r\n\t\t\t\ttext: text\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tgetTopics: function() {\r\n\t\t\treturn createGetRequest('books/topics');\r\n\t\t},\r\n\r\n\t\tgetNotif: function() {\r\n\t\t\treturn createGetRequest('notif');\r\n\t\t},\r\n\t\tpostNotifRead: function(ids) {\r\n\t\t\treturn createPostRequest('notif/read', {\r\n\t\t\t\tnotif_id: ids\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tgetVersion: function(v) {\r\n\t\t\treturn createGetRequest('check-version/' + v);\r\n\t\t},\r\n\r\n\t\tgetUserByMemberId: function(memberId) {\r\n\t\t\treturn createGetRequest('user/id/' + memberId);\r\n\t\t},\r\n\r\n\t\tsendReport: function(text) {\r\n\t\t\treturn createPostRequest('report', {text: text});\r\n\t\t},\r\n\r\n\t\tupdateRegId: function(regId) {\r\n\t\t\treturn createPostRequest('user/reg-id', {reg_id: regId});\r\n\t\t}\r\n\t};\r\n\r\n}]);\r\n\r\nuserModule.run([\"user\", \"$rootScope\", \"$http\", \"$ionicPlatform\", \"$location\", \"pushNotif\", function(user, $rootScope, $http, $ionicPlatform, $location, pushNotif) {\r\n\t$ionicPlatform.ready(function() {\r\n\t\tconsole.log(\"Ionic Ready\");\r\n\t\t$rootScope.user = user;\r\n\t\tuser.cek().then(function() {\r\n\r\n\t\t}, function() {\r\n\t\t\t$location.path('/login');\r\n\t\t});\r\n\t});\r\n\r\n\t$rootScope.$on(\"push-registered\", function() {\r\n\t\tconsole.log(\"push-registered\");\r\n\t\tif (user.isLoginLocal()) {\r\n\t\t\tif (pushNotif.regId) {\r\n\t\t\t\tuser.updateRegId(pushNotif.regId);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n}]);\r\n","var mainApp = angular.module('digilib', ['ionic', 'controllers', 'UserModule', 'SettingModule', 'ngFileUpload', 'PushModule']);\r\n\r\nmainApp.run(['$ionicConfig', '$ionicPlatform', '$ionicHistory', '$rootScope', 'user', '$ionicPopup', function($ionicConfig, $ionicPlatform, $ionicHistory, $rootScope, user, $ionicPopup) {\r\n\r\n\tuser.getVersion(app_version).then(function(res) {\r\n\t\t$ionicPopup.alert({\r\n\t\t\ttitle: res.title,\r\n\t\t\ttemplate: res.text\r\n\t\t}).then(function() {\r\n\t\t\twindow.open(res.gplay, \"_system\");\r\n\t\t});\r\n\t});\r\n\r\n\t$rootScope.version_text = app_version_text;\r\n\r\n\t$ionicPlatform.ready(function() {\r\n\r\n\t\tif (window.cordova && window.cordova.plugins.Keyboard) {\r\n\t\t\tcordova.plugins.Keyboard.hideKeyboardAccessoryBar(true);\r\n\t\t\tcordova.plugins.Keyboard.disableScroll(true);\r\n\r\n\t\t}\r\n\t\tif (window.StatusBar) {\r\n\t\t\tStatusBar.styleDefault();\r\n\t\t}\r\n\t});\r\n\r\n\tif (screen.lockOrientation) {\r\n\t\tscreen.lockOrientation('portrait');\r\n\t}\r\n\r\n\tif (window.cordova && window.cordova.plugins && window.cordova.plugins.autoStart) {\r\n\t\talert(\"autoStart\");\r\n\t\tcordova.plugins.autoStart.enable();\r\n\t}\r\n\r\n\t$rootScope.getVersion = function() {\r\n\t\treturn app_version_text;\r\n\t};\r\n\r\n\t//$rootScope.user = user;\r\n\r\n}]);\r\n\r\nmainApp.config([\"$stateProvider\", \"$urlRouterProvider\", \"$ionicConfigProvider\", function($stateProvider, $urlRouterProvider, $ionicConfigProvider) {\r\n\t//$ionicConfigProvider.views.transition('ios');\r\n    $ionicConfigProvider.tabs.style('standard').position('bottom');\r\n    $ionicConfigProvider.navBar.alignTitle('center').positionPrimaryButtons('left');\r\n\r\n\t$stateProvider\r\n\r\n\t.state('app', {\r\n\t\turl: '/app',\r\n\t\tabstract: true,\r\n\t\ttemplateUrl: 'templates/index.html',\r\n\t\tcontroller: 'IndexController'\r\n\t})\r\n\r\n\t.state('app.koleksi', {\r\n\t\turl: '/koleksi',\r\n\t\tviews: {\r\n\t\t\thistoryRoot: true,\r\n\t\t\tcontent: {\r\n\t\t\t\ttemplateUrl: 'templates/koleksi.html',\r\n\t\t\t\tcontroller: 'KoleksiController'\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\r\n\t.state('app.profil', {\r\n\t\turl: '/profil',\r\n\t\tviews: {\r\n\t\t\tcontent: {\r\n\t\t\t\ttemplateUrl: 'templates/profil.html',\r\n\t\t\t\tcontroller: 'ProfilController'\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\r\n\t.state('app.buku', {\r\n\t\turl: '/buku/:id',\r\n\t\tviews: {\r\n\t\t\tcontent: {\r\n\t\t\t\ttemplateUrl: 'templates/buku.html',\r\n\t\t\t\tcontroller: 'BukuController'\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\r\n\t.state('app.buku-review', {\r\n\t\turl: '/buku/:id/review',\r\n\t\tviews: {\r\n\t\t\tcontent: {\r\n\t\t\t\ttemplateUrl: 'templates/buku-review.html',\r\n\t\t\t\tcontroller: 'BukuReviewController'\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\r\n\t.state('app.pesan', {\r\n\t\turl: '/pesan',\r\n\t\tviews: {\r\n\t\t\tcontent: {\r\n\t\t\t\ttemplateUrl: 'templates/pesan.html',\r\n\t\t\t\tcontroller: 'PesanController'\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\r\n\t.state('app.pesan-single', {\r\n\t\turl: '/pesan-single/:member_id',\r\n\t\tviews: {\r\n\t\t\tcontent: {\r\n\t\t\t\ttemplateUrl: 'templates/pesan-single.html',\r\n\t\t\t\tcontroller: 'PesanSingleController'\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\r\n\t.state('app.pemberitahuan', {\r\n\t\turl: '/pemberitahuan',\r\n\t\tviews: {\r\n\t\t\tcontent: {\r\n\t\t\t\ttemplateUrl: 'templates/pemberitahuan.html',\r\n\t\t\t\tcontroller: 'PemberitahuanController'\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\r\n\t.state('app.pinjaman', {\r\n\t\turl: '/pinjaman',\r\n\t\tviews: {\r\n\t\t\tcontent: {\r\n\t\t\t\ttemplateUrl: 'templates/pinjaman.html',\r\n\t\t\t\tcontroller: 'PinjamanController'\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\r\n\t.state('app.reservasi', {\r\n\t\turl: '/reservasi',\r\n\t\tviews: {\r\n\t\t\tcontent: {\r\n\t\t\t\ttemplateUrl: 'templates/reservasi.html',\r\n\t\t\t\tcontroller: 'ReservasiController'\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\r\n\t.state('app.favorit', {\r\n\t\turl: '/favorit',\r\n\t\tviews: {\r\n\t\t\tcontent: {\r\n\t\t\t\ttemplateUrl: 'templates/favorit.html',\r\n\t\t\t\tcontroller: 'FavoritController'\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\r\n\t.state('app.send_feedback', {\r\n\t\turl: '/send-feedback',\r\n\t\tviews: {\r\n\t\t\tcontent: {\r\n\t\t\t\ttemplateUrl: 'templates/send-feedback.html',\r\n\t\t\t\tcontroller: 'SendFeedbackController'\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\r\n\t.state('app.pengaturan', {\r\n\t\turl: '/pengaturan',\r\n\t\tviews: {\r\n\t\t\tcontent: {\r\n\t\t\t\ttemplateUrl: 'templates/pengaturan.html',\r\n\t\t\t\tcontroller: 'PengaturanController'\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\r\n\t.state('app.about', {\r\n\t\turl: '/about',\r\n\t\tviews: {\r\n\t\t\tcontent: {\r\n\t\t\t\ttemplateUrl: 'templates/about.html'\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\r\n\t.state('app.support', {\r\n\t\turl: '/support',\r\n\t\tviews: {\r\n\t\t\tcontent: {\r\n\t\t\t\ttemplateUrl: 'templates/support.html',\r\n\t\t\t\tcontroller: 'SupportController'\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\r\n\t.state('login-home', {\r\n\t\turl: '/login-home',\r\n\t\ttemplateUrl: 'templates/login-home.html',\r\n\t\tcontroller: 'LoginController'\r\n\t})\r\n\t.state('login', {\r\n\t\turl: '/login',\r\n\t\ttemplateUrl: 'templates/login.html',\r\n\t\tcontroller: 'LoginController'\r\n\t})\r\n\t.state('register', {\r\n\t\turl: '/register',\r\n\t\ttemplateUrl: 'templates/login-register.html',\r\n\t\tcontroller: 'RegisterController'\r\n\t})\r\n\t;\r\n\r\n\t$urlRouterProvider.otherwise('/app/koleksi');\r\n  \r\n\r\n \r\n}]);\r\n\r\n\r\nmainApp.filter('goodate', function() {\r\n  return function(input) {\r\n  \tif (input) {\r\n\t  \tvar d = new Date(input);\r\n\t  \tvar m = ['Jan', 'Feb', 'Mar', 'Apr', 'Mei', 'Jun', 'Jul', 'Agu', 'Sep', 'Okt', 'Nov', 'Des'];\r\n\t  \tvar r = d.getDate() + \" \" + m[d.getMonth()] + \" \" + d.getFullYear() + \", \" + d.getHours().toStringZero(2) + \":\" + d.getMinutes().toStringZero(2);\r\n\t  \treturn r;\r\n\t  } else {\r\n\t  \treturn \"-\";\r\n\t  }\r\n  };\r\n});","var controll = angular.module('controllers', []);\r\n\r\ncontroll.run(['$rootScope', '$ionicPlatform', '$ionicHistory', '$rootScope', 'user', '$location', '$timeout', function($root, $ionicPlatform, $ionicHistory, $rootScope, user, $location, $timeout) {\r\n\tif (!user.isLoginLocal()) {\r\n\t\t$location.path('/login-home');\r\n\t}\r\n\r\n\t$root.notifCount = 0;\r\n\r\n\t/* Handle Notifikasi */\r\n\t$root.$on('notification', function(event, res) {\r\n\t\tconsole.log(res, $location.$$path, res.path);\r\n\r\n\t\t$timeout(function() {\r\n\t\t\tif (res.foreground) {\r\n\r\n\t\t\t\tif ($location.$$path.indexOf(res.path) >= 0) {\r\n\t\t\t\t\tconsole.log(\"refresh\");\r\n\t\t\t\t\t$root.$broadcast(\"refresh\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif ($location.$$path == \"/app/pemberitahuan\") {\r\n\t\t\t\t\t\t$root.$broadcast(\"refresh\");\r\n\t\t\t\t\t\t$root.notifCount = 0;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$root.notifCount++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\t\t\t\tif (res.path) {\r\n\t\t\t\t\t$location.path(res.path);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}, 1000);\r\n\t});\r\n\r\n\t/*$timeout(function() {\r\n\t\t$rootScope.$broadcast(\"notification\", {\r\n\t        \"message\": \"Notifikasi dari Perpustakaan Labschool UPI. Oke?\",\r\n\t        \"title\": \"Mobile APP Library 2.0\",\r\n\t        \"path\": \"/app/pesan\"\r\n    \t});\t\r\n\t}, 2000);*/\r\n}]);\r\n\r\n\r\n/*\r\nMain Controller\r\n*/\r\ncontroll.controller('IndexController', ['$scope', '$state', '$ionicHistory', '$location', '$ionicSideMenuDelegate', 'user', '$ionicPopover', \r\n\tfunction($scope, $state, $ionicHistory, $location, $ionicSideMenuDelegate, user, $ionicPopover) {\r\n\tconsole.info(\"IndexController\");\r\n\r\n\t$scope.$on('$ionicView.enter', function(e, ts) {\r\n\t\t//lgi(\"enter\", e, ts);\r\n\t});\r\n\t$scope.$on('$ionicView.leave', function(e, fs) {\r\n\t\t//lgi(\"leave\", e, fs);\r\n\t});\r\n\r\n\t$scope.isBackButtonShow = function() {\r\n\t\treturn $ionicHistory.backView() !== null;\r\n\t};\r\n\t$scope.changeState = function(to) {\r\n\t\tif ($ionicSideMenuDelegate.isOpenLeft()) {\r\n\t\t\t$ionicSideMenuDelegate.toggleLeft();\r\n\t\t}\r\n\t\t$state.go(to);\r\n\t};\r\n\t$scope.getColor = function (id) {\r\n\t\tid = id || 0;\r\n\t\tvar colors = [\"#F44336\", \"#E91E63\", \"#9C27B0\", \"#673AB7\", \"#3F51B5\", \"#2196F3\", \"#E65100\", \"#33691E\", \"#827717\", \"#006064\", \"#01579B\", \"#009688\", \"#424242\"];\r\n\t\tif (id >= colors.length) {\r\n\t\t\tid = id % colors.length;\r\n\t\t}\r\n\r\n\t\treturn colors[id];\r\n\t};\r\n\t$scope.getBookThumbnail = function (url) {\r\n\t\tif (url) {\r\n\t\t\treturn url;\r\n\t\t}\r\n\t\treturn '';\r\n\t\t //return \"http://localhost/perpus/lib/phpthumb/phpThumb.php?src=../../images/docs/\" + argument + \"&w=100\";\r\n\t};\r\n\r\n\t$scope.getMemberAvatar = function (url) {\r\n\t\tif (url) {\r\n\t\t\treturn url;\r\n\t\t} else {\r\n\t\t\treturn 'img/default-user-image.png';\r\n\t\t}\r\n\t};\r\n\r\n\r\n\t/*\r\n\t * Popup Kanan Atas\r\n\t */\r\n\t$ionicPopover.fromTemplateUrl('menu-pop.html', {\r\n\t\tscope: $scope\r\n\t}).then(function(popover) {\r\n\t\t$scope.popTopRight = popover;\r\n\t});\r\n\t$scope.showRightMenu = function($event) {\r\n\t\t$scope.popTopRight.show($event);\r\n\t};\r\n\r\n\t$scope.$on('$destroy', function() {\r\n\t\t$scope.popTopRight.remove();\r\n\t});\r\n\r\n\t$scope.doViewRefresh = function() {\r\n\t\t$scope.popTopRight.hide();\r\n\r\n\t\t$scope.$broadcast('refresh');\r\n\t};\r\n\r\n\t$scope.doViewHelp = function() {\r\n\t\t$scope.popTopRight.hide();\r\n\r\n\t\twindow.open(apiUrl + '/faq', \"_system\");\r\n\t};\r\n}]);","controll.controller('BukuController', ['$scope', '$state', '$ionicHistory', 'user', '$ionicLoading', '$ionicPopup', '$timeout',\r\n\tfunction($scope, $state, $ionicHistory, user, $ionicLoading, $ionicPopup, $timeout) {\r\n\tconsole.info(\"Buku Controller\");\r\n\r\n\t$scope.id = $state.params.id;\r\n\t$scope.book = false;\r\n\t$scope.isFavorit = false;\r\n\t$scope.isReserve = false;\r\n\r\n\t$scope.doRefresh = function() {\r\n\t\t$ionicLoading.show({template: \"Mengambil Data Buku\"});\r\n\t\tuser.getBook($scope.id).then(function (res) {\r\n\t\t\tonGetBook(res);\t\r\n\t\t\t$ionicLoading.hide();\r\n\t\t}, function(err) {\r\n\t\t\t$ionicLoading.hide();\r\n\t\t\tconsole.log(err);\r\n\t\t\t$state.go('app.koleksi');\r\n\t\t});\r\n\t};\r\n\t$scope.doRefresh();\r\n\r\n\t$scope.toggleFav = function () {\r\n\t\tif (!$scope.isFavorit) {\r\n\t\t\t$scope.isFavorit = true;\r\n\t\t\tuser.setBookFav($scope.id);\r\n\t\t} else {\r\n\t\t\t$scope.isFavorit = false;\r\n\t\t\tuser.unsetBookFav($scope.id);\r\n\t\t}\r\n\t};\r\n\r\n\t$scope.doReservasi = function() {\r\n\t\tif (!$scope.isReserve) {\r\n\t\t\tuser.setBookReserve($scope.book.biblio_id).then(function(res) {\r\n\t\t\t\t$ionicPopup.alert({title: \"Reservasi\", template: res});\r\n\t\t\t\t$scope.doRefresh();\r\n\t\t\t}, function(err) {\r\n\t\t\t\tif (typeof(err) == 'string') {\r\n\t\t\t\t\t$ionicPopup.alert({title: \"Reservasi\", template: err});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t} else {\r\n\t\t\t$ionicPopup.alert({title: \"Reservasi\", template: \"Sudah direservasi.\"});\r\n\t\t}\r\n\t};\r\n\r\n\t$scope.dontReservasi = function() {\r\n\t\tif ($scope.isReserve) {\r\n\t\t\tuser.unsetBookReserve($scope.book.biblio_id).then(function(res) {\r\n\t\t\t\t$scope.doRefresh();\r\n\t\t\t}, function(err) {\r\n\t\t\t\tif (typeof(err) == 'string') {\r\n\t\t\t\t\t$ionicPopup.alert({title: \"Reservasi\", template: err});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t} else {\r\n\t\t\t$ionicPopup.alert({title: \"Reservasi\", template: \"Belum direservasi.\"});\r\n\t\t}\r\n\t};\r\n\r\n\tfunction onGetBook(res) {\r\n\t\t$scope.book = res;\r\n\r\n\t\tif (res.is_fav) {\r\n\t\t\t$scope.isFavorit = true;\r\n\t\t} else {\r\n\t\t\t$scope.isFavorit = false;\r\n\t\t}\r\n\t\tif (res.is_reserve) {\r\n\t\t\t$scope.isReserve = true;\r\n\t\t} else {\r\n\t\t\t$scope.isReserve = false;\r\n\t\t}\r\n\t}\r\n\r\n\t$scope.doOpenUser = function(memberId) {\r\n\t\tconsole.log(memberId);\r\n\r\n\t\t$ionicLoading.show({template: 'Mengambil data user'});\r\n\t\tuser.getUserByMemberId(memberId).then(function(res) {\r\n\t\t\t$ionicLoading.hide();\r\n\r\n\t\t\topenUser(res);\r\n\t\t}, function() {\r\n\t\t\t$ionicLoading.hide();\r\n\t\t});\r\n\t};\r\n\r\n\tfunction openUser(member) {\r\n\t\t$scope.member = member;\r\n\r\n\t\tvar popup = $ionicPopup.show({\r\n\t\t\ttitle: 'Member Info',\r\n\t\t\tcssClass: 'popup-member',\r\n\t\t\ttemplateUrl: 'templates/popup-user.html',\r\n\t\t\tscope: $scope,\r\n\t\t\tbuttons: [{\r\n\t\t\t\ttext: 'Tutup',\r\n\t\t\t\ttype: 'button-default'\r\n\t\t\t}, {\r\n\t\t\t\ttext: 'Kirim Pesan',\r\n\t\t\t\ttype: 'button-positive',\r\n\t\t\t\tonTap: function(e) {\r\n\t\t\t\t\t$timeout(function() {\r\n\t\t\t\t\t\tsendMessage(member.member_id);\r\n\t\t\t\t\t}, 500);\r\n\t\t\t\t}\r\n\t\t\t}]\r\n\t\t});\r\n\t}\r\n\r\n\tfunction sendMessage(memberId) {\r\n\t\t$scope.input = {\r\n\t\t\tmember_id: memberId,\r\n\t\t\ttext: ''\r\n\t\t};\r\n\r\n\t\tvar popup = $ionicPopup.show({\r\n\t\t\ttitle: 'Kirim Pesan',\r\n\t\t\tcssClass: 'new-message',\r\n\t\t\ttemplateUrl: 'templates/popup-newmessage.html',\r\n\t\t\tscope: $scope,\r\n\t\t\tbuttons: [{\r\n\t\t\t\ttext: 'Batal',\r\n\t\t\t\ttype: 'button-default'\r\n\t\t\t}, {\r\n\t\t\t\ttext: 'Kirim',\r\n\t\t\t\ttype: 'button-positive',\r\n\t\t\t\tonTap: function(e) {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t$ionicLoading.show({template: 'Mengirim Pesan'});\r\n\t\t\t\t\tuser.postMessage($scope.input.member_id, $scope.input.text).then(function() {\r\n\t\t\t\t\t\t$ionicLoading.hide();\r\n\t\t\t\t\t\tpopup.close();\r\n\t\t\t\t\t}, function(err) {\r\n\t\t\t\t\t\t$ionicLoading.hide();\r\n\t\t\t\t\t\tif (typeof(err) == 'string') {\r\n\t\t\t\t\t\t\talert(err);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}]\r\n\t\t});\r\n\t}\r\n\r\n\t$scope.doShare = function() {\r\n\t\tif (window.hasOwnProperty('plugins') && window.plugins.hasOwnProperty('socialsharing')) {\r\n\t\t\twindow.plugins.socialsharing.share($scope.book.title, $scope.book.notes, $scope.book.image, webUrl + \"index.php?p=show_detail&id=\" + $scope.book.biblio_id);\r\n\t\t}\r\n\t};\r\n\r\n\t$scope.$on('refresh', function() {\r\n\t\t$scope.doRefresh();\r\n\t});\r\n}]);\r\n\r\ncontroll.controller('BukuReviewController', ['$scope', '$state', '$ionicHistory', 'user', '$ionicLoading', '$ionicPopup',\r\n\tfunction($scope, $state, $ionicHistory, user, $ionicLoading, $ionicPopup) {\r\n\tconsole.info(\"Buku Controller\");\r\n\r\n\t$scope.id = $state.params.id;\r\n\t$scope.book = false;\r\n\t$scope.rating = 0;\r\n\t$scope.comments = [];\r\n\t$scope.input = {\r\n\t\tcomment: \"\"\r\n\t};\r\n\r\n\t$scope.doRefresh = function() {\r\n\t\t$ionicLoading.show({template: \"Mengambil Data Buku\"});\r\n\t\tuser.getBook($scope.id).then(function (res) {\r\n\t\t\tonGetBook(res);\r\n\t\t\t $ionicLoading.hide();\r\n\t\t}, function(err) {\r\n\t\t\t$ionicLoading.hide();\r\n\t\t\tconsole.log(err);\r\n\t\t\t$state.go('app.koleksi');\r\n\t\t});\r\n\t};\r\n\t$scope.doRefresh();\r\n\r\n\t$scope.setRating = function(n) {\r\n\t\t$scope.rating = n;\r\n\t\tuser.setBookRate($scope.id, n).then(function(res) {\r\n\t\t\tconsole.log(\"Set Rate Success\");\r\n\t\t});\r\n\t};\r\n\r\n\t$scope.doSendComment = function () {\r\n\t\t if (!$scope.input.comment) {\r\n\t\t \t$ionicPopup.alert({\r\n\t\t \t\ttitle: \"Data tidak lengkap\",\r\n\t\t \t\ttemplate: \"Kolom komentar harus diisi.\"\r\n\t\t \t});\r\n\t\t }\r\n\r\n\t\t user.setBookComments($scope.id, $scope.input.comment).then(function (res) {\r\n\t\t \t$scope.comments.unshift(res);\r\n\t\t \t $scope.input.comment = \"\";\r\n\t\t }, function (err) {\r\n\t\t \t if (typeof(err) == 'string') {\r\n\t\t \t \t$ionicPopup.alert({\r\n\t\t \t \t\ttitle: 'Gagal mengirim komentar',\r\n\t\t \t \t\ttemplate: err\r\n\t\t \t \t});\r\n\t\t \t }\r\n\t\t });\r\n\t};\r\n\r\n\tfunction onGetBook(res) {\r\n\t\t$scope.book = res;\r\n\t\tif (res.own_rate){\r\n\t\t\t$scope.rating = res.own_rate;\r\n\t\t} else {\r\n\t\t\t$scope.rating = 0;\r\n\t\t}\r\n\r\n\t\tuser.getBookComments($scope.id).then(function(res) {\r\n\t\t\t$scope.comments = res;\r\n\t\t});\r\n\t}\r\n\r\n\t$scope.$on('refresh', function() {\r\n\t\t$scope.doRefresh();\r\n\t});\r\n}]);","controll.controller('FavoritController', ['$scope', '$state', '$ionicHistory', '$ionicLoading', 'user', function($scope, $state, $ionicHistory, $ionicLoading, user) {\r\n\tconsole.info('FavoritController');\r\n\r\n\tvar offset = 0;\r\n\tvar limit = 10;\r\n\tvar param = {\r\n\t\toffset: offset,\r\n\t\tlimit: limit,\r\n\t\tfavorit: 1\r\n\t};\r\n\r\n\t$scope.books = [];\r\n\t$scope.total = 0;\r\n\t$scope.search = {\r\n\t\ttext: ''\r\n\t};\r\n\r\n\t$scope.openBook = function(n) {\r\n\t\t$state.go(\"app.buku\", {id: n});\r\n\t};\r\n\r\n\t$ionicHistory.clearHistory();\r\n\r\n\t$scope.doRefresh = function(reset) {\r\n\t\t$ionicLoading.show({template: 'Mengambil Buku'});\r\n\t\tuser.getBooks(param).then(function(res) {\r\n\t\t\tif (reset) {\r\n\t\t\t\t$scope.books = res.results;\r\n\t\t\t} else {\r\n\t\t\t\t$scope.books = $scope.books.concat(res.results);\r\n\t\t\t}\r\n\t\t\t$scope.total = res.params.total;\r\n\t\t\t$ionicLoading.hide();\r\n\t\t}, function () {\r\n\t\t\t $ionicLoading.hide();\r\n\t\t});\r\n\t};\r\n\t$scope.doRefresh();\r\n\r\n\t$scope.doLoadMore = function () {\r\n\t\toffset += limit;\r\n\t\tparam.limit = limit;\r\n\t\tparam.offset = offset;\r\n\t\t$scope.doRefresh();\t \r\n\t};\r\n\r\n\t$scope.canLoadMore = function() {\r\n\t\t//console.log(offset, $scope.total);\r\n\t\treturn (offset + limit) < $scope.total;\r\n\t};\r\n\r\n\t$scope.doSearch = function() {\r\n\t\t//console.log(\"search \" + $scope.searchText);\r\n\t\toffset = 0;\r\n\t\tlimit = 10;\r\n\t\tparam = {\r\n\t\t\toffset: offset,\r\n\t\t\tlimit: limit,\r\n\t\t\ttitle: $scope.search.text\r\n\t\t};\r\n\t\t$scope.doRefresh(true);\r\n\t};\r\n\r\n\t$scope.doReset = function() {\r\n\t\toffset = 0;\r\n\t\tlimit = 10;\r\n\t\tparam = {\r\n\t\t\toffset: offset,\r\n\t\t\tlimit: limit,\r\n\t\t\tfavorit: 1\r\n\t\t};\r\n\t\t$scope.doRefresh(true);\r\n\t};\r\n\r\n\t$scope.$on(\"$ionicView.enter\", function() {\r\n\t\t$scope.doReset();\r\n\t});\r\n\r\n\t$scope.$on('refresh', function() {\r\n\t\t$scope.doReset();\r\n\t});\r\n\r\n}]);","controll.controller('SendFeedbackController', ['$scope', '$state', '$ionicHistory', 'user', function($scope, $state, $ionicHistory, user) {\r\n\tconsole.info('SendFeedbackController');\r\n\r\n\t$ionicHistory.clearHistory();\r\n\r\n}]);","controll.controller('KoleksiController', ['$scope', '$state', '$ionicHistory', '$ionicLoading', 'user', '$ionicSideMenuDelegate', function($scope, $state, $ionicHistory, $ionicLoading, user, $ionicSideMenuDelegate) {\r\n\tconsole.info(\"Koleksi Controller\");\r\n\r\n\tvar offset = 0;\r\n\tvar limit = 10;\r\n\tvar param = {\r\n\t\toffset: offset,\r\n\t\tlimit: limit\r\n\t};\r\n\r\n\t$scope.sectionTitle = '';\r\n\t$scope.books = [];\r\n\t$scope.total = 0;\r\n\t$scope.search = {\r\n\t\ttext: ''\r\n\t};\r\n\t$scope.topics = [];\r\n\tuser.getTopics().then(function(res) {\r\n\t\t$scope.topics = res;\r\n\t});\r\n\r\n\t$scope.openBook = function(n) {\r\n\t\t$state.go(\"app.buku\", {id: n});\r\n\t};\r\n\r\n\t$ionicHistory.clearHistory();\r\n\r\n\t$scope.doRefresh = function(reset) {\r\n\t\t$ionicLoading.show({template: 'Mengambil Buku'});\r\n\t\tuser.getBooks(param).then(function(res) {\r\n\t\t\tif (reset) {\r\n\t\t\t\t$scope.books = res.results;\r\n\t\t\t} else {\r\n\t\t\t\t$scope.books = $scope.books.concat(res.results);\r\n\t\t\t}\r\n\t\t\t$scope.total = res.params.total;\r\n\r\n\t\t\tif (res.params && res.params.topic_name) {\r\n\t\t\t\t$scope.sectionTitle = 'Kategori : ' + res.params.topic_name.toTitleCase();\r\n\t\t\t} else if (res.params && res.params.title) {\r\n\t\t\t\t$scope.sectionTitle = 'Pencarian : ' + res.params.title.toTitleCase();\r\n\t\t\t} else {\r\n\t\t\t\t$scope.sectionTitle = false;\r\n\t\t\t}\r\n\r\n\t\t\t$ionicLoading.hide();\r\n\t\t}, function () {\r\n\t\t\t $ionicLoading.hide();\r\n\t\t});\r\n\t};\r\n\t$scope.doRefresh();\r\n\r\n\t$scope.doLoadMore = function () {\r\n\t\toffset += limit;\r\n\t\tparam.limit = limit;\r\n\t\tparam.offset = offset;\r\n\t\t$scope.doRefresh();\t \r\n\t};\r\n\r\n\t$scope.canLoadMore = function() {\r\n\t\t//console.log(offset, $scope.total);\r\n\t\treturn (offset + limit) < $scope.total;\r\n\t};\r\n\r\n\t$scope.doSearch = function() {\r\n\t\t//console.log(\"search \" + $scope.searchText);\r\n\t\toffset = 0;\r\n\t\tlimit = 10;\r\n\t\tparam = {\r\n\t\t\toffset: offset,\r\n\t\t\tlimit: limit,\r\n\t\t\ttitle: $scope.search.text\r\n\t\t};\r\n\t\t$scope.doRefresh(true);\r\n\t};\r\n\r\n\t$scope.doOpenTopic = function(topicId) {\r\n\t\toffset = 0;\r\n\t\tlimit = 10;\r\n\t\tparam = {\r\n\t\t\toffset: offset,\r\n\t\t\tlimit: limit,\r\n\t\t\ttopic: topicId\r\n\t\t};\r\n\t\t$scope.doRefresh(true);\r\n\t};\r\n\r\n\t$scope.doReset = function () {\r\n\t\toffset = 0;\r\n\t\tlimit = 10;\r\n\t\tparam = {\r\n\t\t\toffset: offset,\r\n\t\t\tlimit: limit\r\n\t\t};\r\n\t\t$scope.doRefresh(true);\r\n\t};\r\n\r\n\t$scope.$on('refresh', function() {\r\n\t\t$scope.doReset();\r\n\t});\r\n\r\n\t$scope.onTopicDown = function() {\r\n\t\t$ionicSideMenuDelegate.canDragContent(false);\r\n\t};\r\n\r\n\t$scope.onTopicUp = function() {\r\n\t\t$ionicSideMenuDelegate.canDragContent(true);\r\n\t};\r\n\r\n\r\n\t$scope.getBG = function(id) {\r\n\t\tvar colors = ['#daedf2', '#a5f7b3', '#f7f1a5', '#f7a5a5', '#c9bbf3', '#f3bbe2'];\r\n\t\treturn colors[id % colors.length];\r\n\t};\r\n\r\n}]);","controll.controller('LoginController', ['$scope', '$location', '$state', '$ionicHistory', 'user', '$ionicPopup', '$ionicLoading', function($scope, $location, $state, $ionicHistory, user, $ionicPopup, $ionicLoading) {\r\n\tconsole.info('LoginController');\r\n\r\n\t$ionicHistory.clearHistory();\r\n\t$scope.data = {\r\n\t\tusername: '',\r\n\t\tpassword: ''\r\n\t};\r\n\r\n\t$scope.doLogin = function() {\r\n\t\tconsole.log(\"login\", $scope.data.username);\r\n\t\tif($scope.data.username === \"\") {\r\n\t\t\t$ionicPopup.alert({\r\n\t\t\t\ttemplate: \"Username / Email tidak boleh kosong.\",\r\n\t\t\t\ttitle: \"Data Tidak Lengkap\"\r\n\t\t\t});\r\n\t\t} else if ($scope.data.password === \"\") {\r\n\t\t\t$ionicPopup.alert({\r\n\t\t\t\ttemplate: \"Password tidak boleh kosong.\",\r\n\t\t\t\ttitle: \"Data Tidak Lengkap\"\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\t$ionicLoading.show({template: \"Memproses Login\"});\r\n\t\t\tuser.login($scope.data.username, $scope.data.password).then(function(res) {\r\n\t\t\t\t$state.go('app.koleksi');\r\n\t\t\t\t$ionicLoading.hide();\r\n\t\t\t}, function(err) {\r\n\t\t\t\t$ionicLoading.hide();\r\n\t\t\t\t$ionicPopup.alert({\r\n\t\t\t\t\ttemplate: err,\r\n\t\t\t\t\ttitle: \"Gagal\"\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\t$scope.openRegister = function() {\r\n\t\t$state.go('register');\r\n\t};\r\n\r\n}]);\r\n\r\n\r\ncontroll.controller('RegisterController', ['$scope', '$location', '$state', '$ionicHistory', 'user', '$ionicPopup', '$ionicLoading', function($scope, $location, $state, $ionicHistory, user, $ionicPopup, $ionicLoading) {\r\n\tconsole.log(\"RegisterController\");\r\n\r\n\t$scope.data = {\r\n\t\tmember_id: '',\r\n\t\tmember_name: '',\r\n\t\temail: '',\r\n\t\tmember_phone: '',\r\n\t\tpassword: ''\r\n\t};\r\n\r\n\t$scope.openLogin = function() {\r\n\t\t$state.go('login');\r\n\t};\r\n\r\n\t$scope.doRegister = function() {\r\n\t\tvar mailtest = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n    \t\r\n\t\tif (!$scope.data.member_id || ($scope.data.member_id.length < 5)) {\r\n\t\t\t$ionicPopup.alert({\r\n\t\t\t\ttemplate: \"Member ID tidak boleh kosong. Minimal 5 Karakter.\",\r\n\t\t\t\ttitle: \"Data Tidak Lengkap\"\r\n\t\t\t});\r\n\t\t} else if (!$scope.data.member_name || ($scope.data.member_name.length < 5)) {\r\n\t\t\t$ionicPopup.alert({\r\n\t\t\t\ttemplate: \"Nama Lengkap tidak boleh kosong. Minimal 5 Karakter.\",\r\n\t\t\t\ttitle: \"Data Tidak Lengkap\"\r\n\t\t\t});\r\n\t\t} else if (!$scope.data.email) {\r\n\t\t\t$ionicPopup.alert({\r\n\t\t\t\ttemplate: \"Email tidak boleh kosong.\",\r\n\t\t\t\ttitle: \"Data Tidak Lengkap\"\r\n\t\t\t});\r\n\t\t} else if (!mailtest.test($scope.data.email)) {\r\n\t\t\t$ionicPopup.alert({\r\n\t\t\t\ttemplate: \"Format Email tidak benar.\",\r\n\t\t\t\ttitle: \"Data Tidak Lengkap\"\r\n\t\t\t});\r\n\t\t} else if (!$scope.data.member_phone && ($scope.data.member_phone.length < 5)) {\r\n\t\t\t$ionicPopup.alert({\r\n\t\t\t\ttemplate: \"Nomor HP tidak boleh kosong.\",\r\n\t\t\t\ttitle: \"Data Tidak Lengkap\"\r\n\t\t\t});\r\n\t\t} else if (!$scope.data.password || ($scope.data.password.length < 6) || ($scope.data.password != $scope.data.password2)) {\r\n\t\t\t$ionicPopup.alert({\r\n\t\t\t\ttemplate: \"Password tidak boleh kosong dan minimal mengandung 6 karakter. Kedua password harus sama.\",\r\n\t\t\t\ttitle: \"Data Tidak Lengkap\"\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\t$ionicLoading.show({template: \"Memproses Registrasi\"});\r\n\t\t\tuser.register($scope.data).then(function() {\r\n\t\t\t\t$state.go('app.koleksi');\r\n\t\t\t\t$ionicLoading.hide();\r\n\t\t\t}, function(err) {\r\n\t\t\t\t$ionicLoading.hide();\r\n\t\t\t\t$ionicLoading.hide();\r\n\t\t\t\t$ionicPopup.alert({\r\n\t\t\t\t\ttemplate: err,\r\n\t\t\t\t\ttitle: \"Gagal\"\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n}]);","controll.controller('PemberitahuanController', ['$rootScope', '$scope', '$state', '$ionicHistory', 'user', '$ionicLoading', function($root, $scope, $state, $ionicHistory, user, $ionicLoading) {\r\n\tconsole.info(\"PemberitahuanController\");\r\n\r\n\t$ionicHistory.clearHistory();\r\n\r\n\t$scope.notifs = [];\r\n\r\n\t$scope.doRefresh = function() {\r\n\t\t$ionicLoading.show({template: 'Mengambil Data Notifikasi'});\r\n\t\tuser.getNotif().then(function(res) {\r\n\t\t\t$scope.notifs = res;\r\n\r\n\t\t\treads();\r\n\r\n\t\t\t$ionicLoading.hide();\r\n\t\t}, function() {\r\n\t\t\t$ionicLoading.hide();\r\n\t\t});\r\n\t};\r\n\r\n\t$scope.$on('refresh', function() {\r\n\t\t$scope.doRefresh();\r\n\t});\t\r\n\r\n\t$scope.doRefresh();\r\n\r\n\t$scope.$on(\"$ionicView.enter\", function() {\r\n\t\t$root.notifCount = 0;\r\n\t\t$scope.doRefresh();\r\n\t});\r\n\r\n\r\n\tfunction reads() {\r\n\t\tvar ids = [];\r\n\t\tfor (var i = 0; i < $scope.notifs.data.length; i++) {\r\n\t\t\tif ($scope.notifs.data[i].is_read === '0')\r\n\t\t\t\tids.push($scope.notifs.data[i].id);\r\n\t\t}\r\n\r\n\t\tif (ids.length) {\r\n\t\t\tuser.postNotifRead(ids).then(function(res) {\r\n\t\t\t\tconsole.log(\"Notif Read\", res);\r\n\t\t\t}, function() {\r\n\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t$scope.doOpen = function(notif) {\r\n\t\tif (notif.text.indexOf('mengirim pesan') === 0) {\r\n\t\t\t$state.go('app.pesan-single', {member_id: notif.from_id});\r\n\t\t}\r\n\t};\r\n}]);","controll.controller('PengaturanController', ['$scope', '$state', '$location', '$ionicHistory', 'user', function($scope, $state, $location, $ionicHistory, user) {\r\n\tconsole.info('PengaturanController');\r\n\r\n\t$ionicHistory.clearHistory();\r\n\r\n\t$scope.setting = {\r\n\t\tnotif_email: user.profile.setting.notif_email == '1',\r\n\t\tnotif_app: user.profile.setting.notif_app == '1'\r\n\t};\r\n\r\n\t$scope.$on(\"$ionicView.enter\", function() {\r\n\t\t$scope.setting = {\r\n\t\t\tnotif_email: user.profile.setting.notif_email == '1',\r\n\t\t\tnotif_app: user.profile.setting.notif_app == '1'\r\n\t\t};\r\n\t});\r\n\r\n\t$scope.doUpdateSetting = function() {\r\n\t\tvar setting = {\r\n\t\t\tnotif_email: ($scope.setting.notif_email ? '1' : '0'),\r\n\t\t\tnotif_app: ($scope.setting.notif_app ? '1' : '0')\r\n\t\t};\r\n\r\n\t\tuser.updateUserSetting(setting);\r\n\t};\r\n\r\n\r\n\t$scope.doLogout = function() {\r\n\t\tuser.logout();\r\n\t\t$location.path(\"/login\");\r\n\t};\r\n\r\n\t$scope.doOpenAbout = function() {\r\n\t\t$state.go('app.about');\r\n\t};\r\n\r\n\t$scope.doOpenSupport = function() {\r\n\t\t$state.go('app.support');\r\n\t};\r\n\r\n}]);","controll.controller('PesanSingleController', ['$scope', '$state', 'user', '$ionicLoading', '$ionicPopup', '$stateParams', '$ionicScrollDelegate',\r\n\tfunction($scope, $state, user, $ionicLoading, $ionicPopup, $stateParams, $ionicScrollDelegate) {\r\n\tconsole.info('PesanController');\r\n\r\n\tvar sdel = $ionicScrollDelegate.$getByHandle('chatScroll');\r\n\r\n\tif (!$stateParams.member_id) {\r\n\t\t$state.go('app.pesan');\r\n\t}\r\n\r\n\t$scope.member_id = $stateParams.member_id;\r\n\r\n\t$scope.text = '';\r\n\r\n\t$scope.messages = [];\r\n\t$scope.doRefresh = function() {\r\n\t\t$ionicLoading.show({template: 'Mengambil Pesan'});\r\n\t\tuser.getMessageTexts($stateParams.member_id).then(function(res) {\r\n\t\t\t$scope.messages = res;\r\n\t\t\tsdel.scrollBottom();\r\n\t\t\t$ionicLoading.hide();\r\n\t\t}, function() {\r\n\t\t\t$ionicLoading.hide();\r\n\t\t});\r\n\t};\r\n\r\n\t$scope.doRefresh();\r\n\r\n\t$scope.sendMessage = function() {\r\n\t\t$ionicLoading.show({template: 'Mengirim Pesan'});\r\n\t\tuser.postMessage($stateParams.member_id, $scope.text).then(function() {\r\n\t\t\t$ionicLoading.hide();\r\n\t\t\t$scope.text = '';\r\n\t\t\t$scope.doRefresh();\r\n\t\t}, function() {\r\n\t\t\t$ionicLoading.hide();\r\n\t\t});\r\n\t};\r\n\r\n\t$scope.$on('refresh', function() {\r\n\t\t$scope.doRefresh();\r\n\t});\t\r\n\r\n}]);","controll.controller('PesanController', ['$scope', '$state', '$ionicHistory', 'user', '$ionicLoading', '$ionicPopup', function($scope, $state, $ionicHistory, user, $ionicLoading, $ionicPopup) {\r\n\tconsole.info('PesanController');\r\n\t$ionicHistory.clearHistory();\r\n\r\n\t$scope.messages = [];\r\n\r\n\t$scope.doRefresh = function() {\r\n\t\t$ionicLoading.show({template: 'Mengambil Daftar Pesan'});\r\n\t\tuser.getMessageList().then(function(res) {\r\n\t\t\t$scope.messages = res;\r\n\t\t\t$ionicLoading.hide();\r\n\t\t}, function() {\r\n\t\t\t$ionicLoading.hide();\r\n\t\t});\r\n\t};\r\n\r\n\t$scope.$on('refresh', function() {\r\n\t\t$scope.doRefresh();\r\n\t});\t\r\n\r\n\t$scope.doRefresh();\r\n\r\n\t$scope.newMessage = function() {\r\n\t\t$scope.input = {\r\n\t\t\tmember_id: '',\r\n\t\t\ttext: ''\r\n\t\t};\r\n\r\n\t\tvar popup = $ionicPopup.show({\r\n\t\t\ttitle: 'Kirim Pesan',\r\n\t\t\tcssClass: 'new-message',\r\n\t\t\ttemplateUrl: 'templates/popup-newmessage.html',\r\n\t\t\tscope: $scope,\r\n\t\t\tbuttons: [{\r\n\t\t\t\ttext: 'Batal',\r\n\t\t\t\ttype: 'button-default'\r\n\t\t\t}, {\r\n\t\t\t\ttext: 'Kirim',\r\n\t\t\t\ttype: 'button-positive',\r\n\t\t\t\tonTap: function(e) {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t$ionicLoading.show({template: 'Mengirim Pesan'});\r\n\t\t\t\t\tuser.postMessage($scope.input.member_id, $scope.input.text).then(function() {\r\n\t\t\t\t\t\t$ionicLoading.hide();\r\n\t\t\t\t\t\tpopup.close();\r\n\t\t\t\t\t\t$scope.doRefresh();\r\n\t\t\t\t\t}, function(err) {\r\n\t\t\t\t\t\t$ionicLoading.hide();\r\n\t\t\t\t\t\tif (typeof(err) == 'string') {\r\n\t\t\t\t\t\t\talert(err);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}]\r\n\t\t});\r\n\t};\r\n\r\n\t$scope.openChat = function(member_id) {\r\n\t\t$state.go('app.pesan-single', {member_id: member_id});\r\n\t};\r\n\r\n}]);","controll.controller('PinjamanController', ['$scope', '$state', '$ionicHistory', 'user', function($scope, $state, $ionicHistory, user) {\r\n\tconsole.info('PinjamanController');\r\n\r\n\t$scope.books = [];\r\n\t$scope.doRefresh = function() {\r\n\t\tuser.getBookLoans().then(function(res){\r\n\t\t\tconsole.log(res);\r\n\t\t\t$scope.books = res;\r\n\t\t});\r\n\t};\r\n\r\n\t$scope.doRefresh();\r\n\r\n\t$scope.$on(\"$ionicView.enter\", function() {\r\n\t\t$scope.doRefresh();\r\n\t});\r\n\r\n\t$scope.$on('refresh', function() {\r\n\t\t$scope.doRefresh();\r\n\t});\r\n\r\n\t$scope.openBook = function(n) {\r\n\t\t$state.go(\"app.buku\", {id: n});\r\n\t};\r\n\r\n}]);","controll.controller('ProfilController', ['$scope', '$state', '$ionicHistory', 'user', '$ionicLoading', '$timeout', '$ionicPopup', function($scope, $state, $ionicHistory, user, $ionicLoading, $timeout, $ionicPopup) {\r\n\tconsole.info('ProfilController');\r\n\r\n\t$ionicHistory.clearHistory();\r\n\r\n\t$scope.edit = {\r\n\t\tmember_name: user.profile.member_name,\r\n\t\tmember_phone: user.profile.member_phone,\r\n\t\tmember_address: user.profile.member_address\r\n\t};\r\n\r\n\t$scope.isEditPhone = false;\r\n\t$scope.editPhone = function() {\r\n\t\tif (!$scope.isEditPhone) {\r\n\t\t\t$scope.edit.member_phone = user.profile.member_phone;\r\n\t\t\t$scope.isEditPhone = true;\r\n\t\t}\r\n\t};\r\n\r\n\t$scope.isEditAddress = false;\r\n\t$scope.editAddress = function() {\r\n\t\tif (!$scope.isEditAddress) {\r\n\t\t\t$scope.edit.member_address = user.profile.member_address;\r\n\t\t\t$scope.isEditAddress = true;\r\n\t\t}\r\n\t};\r\n\r\n\t$scope.isEditName = false;\r\n\t$scope.editName = function() {\r\n\t\tif (!$scope.isEditName) {\r\n\t\t\t$scope.edit.member_name = user.profile.member_name;\r\n\t\t\t$scope.isEditName = true;\r\n\t\t}\r\n\t};\r\n\r\n\t$scope.saveBio = function() {\r\n\t\t$ionicLoading.show({template: 'Menyimpan Biodata'});\r\n\t\tuser.saveBio($scope.edit).then(function() {\r\n\t\t\tuser.profile.member_phone = $scope.edit.member_phone;\r\n\t\t\tuser.profile.member_address = $scope.edit.member_address;\r\n\t\t\tuser.profile.member_name = $scope.edit.member_name;\r\n\r\n\t\t\t$scope.isEditPhone = false;\r\n\t\t\t$scope.isEditAddress = false;\r\n\t\t\t$scope.isEditName = false;\r\n\t\t\t$ionicLoading.hide();\r\n\t\t}, function() {\r\n\t\t\t$ionicLoading.hide();\r\n\t\t});\r\n\t};\r\n\r\n\t$scope.doChangeAvatar = function() {\r\n\t\tif (window.imagePicker) {\r\n\t\t\twindow.imagePicker.getPictures(\r\n\t\t\tfunction(results) {\r\n\t\t\t\tif (results.length > 0) {\r\n\t\t\t\t\tuploadFile(results[0]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\talert(\"Image Not Detected\");\r\n\t\t\t\t}\r\n\t\t\t}, function (error) {\r\n\t\t\t\talert('Error: ' + error);\r\n\t\t\t}, {\r\n\t\t\t\tmaximumImagesCount: 1,\r\n\t\t\t\twidth: 200\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\talert(\"tanpa imagePicker\");\r\n\t\t\tdocument.getElementById(\"userImageEl\").click();\r\n\t\t}\r\n\t};\r\n\t\r\n\t$scope.changeImage = function(f) {\r\n\t\tif (f.files.length > 0) {\r\n\t\t\tvar file = f.files[0];\r\n\r\n\t\t\t$ionicLoading.show({template: \"Ganti Profil\"});\r\n\t\t\tuser.changeAvatar(file).then(function(url) {\r\n\t\t\t\t$ionicLoading.hide();\r\n\r\n\t\t\t\t$timeout(function() {\r\n\t\t\t\t\tuser.profile.member_image = url;\r\n\t\t\t\t}, 200);\r\n\r\n\t\t\t}, function(err) {\r\n\t\t\t\t$ionicLoading.hide();\r\n\t\t\t\tif (typeof(err) == 'string') {\r\n\t\t\t\t\t$ionicPopup.alert({template: err, title: \"Gagal\"});\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$ionicPopup.alert({template: \"Gagal ganti avatar\", title: \"Gagal\"});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tfunction uploadFile(fileURL) {\r\n\t\t/* upload avatar ke server */\r\n\t\tif (FileUploadOptions && FileTransfer) {\r\n\t\t\t$ionicLoading.show({template: \"Ganti Profil\"});\r\n\r\n\t\t\tvar options = new FileUploadOptions();\r\n\t\t\toptions.fileKey = \"file\";\r\n\t\t\toptions.fileName = fileURL.substr(fileURL.lastIndexOf('/') + 1);\r\n\t\t\toptions.mimeType = \"image/jpg\";\r\n\r\n\t\t\tvar headers = {'token': user.getKey()};\r\n\t\t\toptions.headers = headers;\r\n\r\n\t\t\tvar ft = new FileTransfer();\r\n\t\t\tft.upload(fileURL, encodeURI(apiUrl + \"user/avatar\"), function(res) {\r\n\t\t\t\t$ionicLoading.hide();\r\n\t\t\t\ttry {\r\n\t\t\t\t\tvar dres = JSON.parse(res.response);\r\n\t\t\t\t\tif (dres.status) {\r\n\r\n\t\t\t\t\t\t$timeout(function() {\r\n\t\t\t\t\t\t\tuser.profile.member_image = dres.data;\r\n\t\t\t\t\t\t}, 200);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\talert(\"gagal : \" + res.response);\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\talert(\"error : \" + res.response);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//success callback\r\n\t\t\t}, function() {\r\n\t\t\t\t//error callback\r\n\t\t\t\t$ionicLoading.hide();\r\n\t\t\t\t$ionicPopup.alert({template: \"Ganti Avatar Gagal.\", title: \"Gagal\"});\r\n\t\t\t}, options);\r\n\t\t} else {\r\n\t\t\t$ionicPopup.alert(\"Kesalahan pengolahan gambar.\");\r\n\t\t}\r\n\t}\r\n\r\n}]);","controll.controller('ReservasiController', ['$scope', '$state', '$ionicHistory', 'user', function($scope, $state, $ionicHistory, user) {\r\n\tconsole.info('ReservasiController');\r\n\r\n\t$scope.books = [];\r\n\t$scope.doRefresh = function() {\r\n\t\tuser.getBookReserve().then(function(res){\r\n\t\t\tconsole.log(res);\r\n\t\t\t$scope.books = res;\r\n\t\t});\r\n\t};\r\n\r\n\t$scope.doRefresh();\r\n\r\n\t$scope.$on(\"$ionicView.enter\", function() {\r\n\t\t$scope.doRefresh();\r\n\t});\r\n\r\n\t$scope.$on('refresh', function() {\r\n\t\t$scope.doRefresh();\r\n\t});\r\n\r\n\t$scope.openBook = function(n) {\r\n\t\tconsole.log(\"Open \" + n);\r\n\t\t$state.go(\"app.buku\", {id: n});\r\n\t};\r\n\r\n}]);","controll.controller('SupportController', ['$scope', '$state', '$location', '$ionicHistory', 'user', '$ionicLoading', '$ionicPopup', \r\n\tfunction($scope, $state, $location, $ionicHistory, user, $ionicLoading, $ionicPopup) {\r\n\tconsole.info('SupportController');\r\n\r\n\t$scope.input = {\r\n\t\ttext: ''\r\n\t};\r\n\r\n\t$scope.doSend = function() {\r\n\r\n\t\tif ($scope.input.text) {\r\n\t\t\t$ionicLoading.show({template: 'Mengirim Pesan'});\r\n\t\t\tuser.sendReport($scope.input.text).then(function() {\r\n\t\t\t\t$scope.input.text = '';\r\n\t\t\t\t$ionicLoading.hide();\r\n\r\n\t\t\t\t$ionicPopup.alert({\r\n\t\t\t\t\ttitle: 'Berhasil',\r\n\t\t\t\t\ttemplate: 'Pertanyaan / saran telah terkirim. Mohon tunggu untuk balasan lebih lanjut dari kami melalui kotak pesan.'\r\n\t\t\t\t});\r\n\t\t\t}, function() {\r\n\t\t\t\t$ionicLoading.hide();\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n}]);"],"sourceRoot":"/source/"}